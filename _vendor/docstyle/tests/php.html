<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title></title>
  <style type="text/css">
  /*<![CDATA[*/
    @import "../basic.css";
    @import "../geshi.css";
    #switcher {
        position: fixed;
        top:0; left: 0;
        padding: 1em;
        background-color: #DDDDDD;
    }
    body.dark #switcher a {
        color: #000000;
    }
  /*]]>*/
  </style>
  <script type="text/javascript" src="../jquery.js"></script>
  <script type="text/javascript" src="../main.js"></script>
  <script type="text/javascript" charset="utf-8">
    var bdy_elt = null;
    var switch_light = function()
    {
        bdy_elt = bdy_elt || $('body');
        bdy_elt.removeClass('dark');
        return true;
    };
    var switch_dark = function()
    {
        bdy_elt = bdy_elt || $('body');
        bdy_elt.addClass('dark');
        return true;
    }
    $(function(){
        $('#switch_dark').click(switch_dark);
        $('#switch_light').click(switch_light);
        
        if ( /.*#light$/.test(document.location) )
        {
            switch_light();
        }
        else if ( /.*#dark$/.test(document.location) )
        {
            switch_dark();
        }
    });
  </script>
</head>
<body>

<div id="switcher" class="noprint">
    <ul style="margin:0;padding:0;list-style-type:none;">
        <li><a href="#dark" id="switch_dark">Switch to Dark</a></li>
        <li><a href="#light" id="switch_light">Switch to Light</a></li>
    </ul>
</div>

<h1 id="php_practice_problems">PHP Practice Problems</h1>

<p><a href="./rails.html">Go to Rails Notes</a></p>
<p><a href="http://php.net" target="_top">Go to PHP.net and break out of frames.</a></p>

<p>I&#8217;ve gone through and indicated the difficulty of each problem on a 5-&#x2605;
scale. One &#x2605; is easy while five &#x2605;s is tough.</p>

<p>Even if you do not know how to solve a problem, you should give it a shot and
read the problem and its solution thoroughly. In most cases these problems are
written to introduce concepts rather than test your coding abilities.</p>

<p>These problems are not really in any specific order, but I&#8217;ve done my best to
indicate where one function uses a previous function (as a lot of these do).</p>

<h2>A Brief Note on Strings</h2>

<p>Throughout, I&#8217;ll assume you&#8217;re good with returning strings and escaping
quotes. Also note that in PHP, variables are replaced (<em>interpolated</em>) within
double-quoted strings but are simply ignored within single-quoted strings.</p>

<p>It&#8217;s also pertinent to note that the newline and tab characters only work
while within double-quoted strings.</p>

<p>Note the output of the following code:</p>

<p><div>
<pre class="php"><span class="re0">$first</span> <span class="re2">=</span> <span class="st0">'Mickey'</span>;
<span class="re0">$last</span>  <span class="re2">=</span> <span class="st0">'Mouse'</span>;
<span class="re0">$full</span>  <span class="re2">=</span> <span class="st0">&quot;$first $last&quot;</span>;
<span class="co1">//     = &quot;Mickey Mouse&quot;</span>
<span class="re0">$quote</span> <span class="re2">=</span> <span class="st0">'&quot;I said it&quot;, $full<span class="es0">\'</span>s Wife Said Said'</span>;
<span class="co1">//     = &quot;I said it&quot;, $full's Wife Said</span>
<span class="co1">//          (surrounded by quotes)</span>
<span class="co1">//      (note that `$full` is *not* replaced)</span>
<a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="st0">&quot;$full&quot;</span>;
<a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="st0">'$full'</span>;
<a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="st0">&quot;<span class="es0">\n</span><span class="es0">\t</span>&quot;</span>;
<a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="st0">'<span class="es0">\n</span><span class="es0">\t</span>'</span>;
<a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="st0">&quot;<span class="es0">\n</span>$full<span class="es0">\t</span><span class="es0">\t</span>$full&quot;</span>;</pre>
</div></p>

<p>The output is</p>

<p><div>
<pre>Mickey Mouse$full
    \n\t
Mickey Mouse        Mickey Mouse</pre>
</div></p>

<p>As a simpler example, consider</p>

<p><div>
<pre class="php"><span class="re0">$var</span> <span class="re2">=</span> <span class="st0">&quot;thevar&quot;</span>;
<a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="st0">&quot;MyNewline<span class="es0">\n</span><span class="es0">\t</span>tabbed<span class="es0">\n</span>$var<span class="es0">\n</span>&quot;</span>;
<a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="st0">'MyNewline<span class="es0">\n</span><span class="es0">\t</span>tabbed<span class="es0">\n</span>$var<span class="es0">\n</span>'</span>;</pre>
</div></p>

<p>whose output is the string</p>

<p><div>
<pre>MyNewline
    tabbed
thevar
MyNewline\n\ttabbed\n$var\n</pre>
</div></p>

<p>So in <em>double</em> quotes, newline- and tab-escapes (<code>\n</code> and <code>\t</code>) are replaced,
as are variables. But in <em>single</em> quotes, nothing is replaced except for <code>\'</code>
which is of course replaced with a single-quote character.</p>

<h2>Loose Syntax &#x2605;</h2>

<p>Just an observation, not a problem.</p>

<p>PHP is known for being a &#8220;sloppy&#8221; language for many reasons. One of the places
where its sloppiness can come to your advantage is in how liberally you can
space your files.</p>

<p>We already know that PHP considers all whitespace to be created equally
allowing us to do something like</p>

<p><div>
<pre class="php"><span class="re0">$a</span> <span class="re2">=</span> <span class="nu0">3</span>;
<span class="re0">$b</span>          <span class="re2">=</span> <span class="nu0">5</span>;
<span class="re0">$c</span> <span class="re2">=</span>
            <span class="nu0">6</span>;
<span class="re0">$d</span> <span class="re2">=</span> <a href="http://www.php.net/time"><span class="kw3">time</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
<span class="re0">$e</span> <span class="re2">=</span> <span class="re0">$d</span> + 
        <a href="http://www.php.net/time"><span class="kw3">time</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>but you can even put an arbitrary amount of whitespace between the name of a
function and its parentheses such as:</p>

<p><div>
<pre class="php"><span class="re0">$d</span> <span class="re2">=</span> <a href="http://www.php.net/time"><span class="kw3">time</span></a> <span class="br0">&#40;</span><span class="br0">&#41;</span>;
<span class="re0">$e</span> <span class="re2">=</span> <a href="http://www.php.net/time"><span class="kw3">time</span></a>
<span class="br0">&#40;</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>or as a more useful example, you can put whitespace after the word <code>array</code>:</p>

<p><div>
<pre class="php"><span class="re0">$chars</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a>
<span class="br0">&#40;</span>
    <span class="st0">'Horton'</span> <span class="re2">=&gt;</span> <span class="st0">'Elephant'</span>,
    <span class="st0">'Hooey'</span>  <span class="re2">=&gt;</span> <span class="st0">'Owl'</span>,
    <span class="st0">'Cat'</span>    <span class="re2">=&gt;</span> <span class="st0">'Cat'</span>
<span class="br0">&#41;</span>;</pre>
</div></p>

<h2>Too Many Brackets &#x2605;</h2>

<p>This is not a problem, just a useful observation.</p>

<p>This is handy: it turns out that you don&#8217;t always need curly brackets around
flow-control (<code>if</code>, <code>while</code>, <code>for</code>, <code>foreach</code>, etc.) statement blocks. In
fact, you only need them if there is more than one statement inside the block.</p>

<p>So the following code</p>

<p><div>
<pre class="php"><span class="kw1">if</span> <span class="br0">&#40;</span> <span class="re0">$age</span> <span class="re2">&gt;=</span> <span class="nu0">21</span> <span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="st0">'Have a beer'</span>;
<span class="br0">&#125;</span> <span class="kw1">else</span>
<span class="br0">&#123;</span>
    <a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="st0">'Have a soda!'</span>;
<span class="br0">&#125;</span>
<span class="kw1">for</span> <span class="br0">&#40;</span> <span class="re0">$i</span><span class="re2">=</span><span class="nu0">0</span>; <span class="re0">$i</span> <span class="re2">&lt;</span> <span class="re0">$age</span>; <span class="re0">$i</span>++ <span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span> <span class="re0">$i</span> % <span class="nu0">2</span> <span class="re2">==</span> <span class="nu0">0</span> <span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="st0">&quot;Even year $i!&quot;</span>;
    <span class="br0">&#125;</span> <span class="kw1">else</span>
    <span class="br0">&#123;</span>
        <a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="st0">&quot;Odd year $i!&quot;</span>;
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>
</div></p>

<p>is equivalent to the code</p>

<p><div>
<pre class="php"><span class="kw1">if</span> <span class="br0">&#40;</span> <span class="re0">$age</span> <span class="re2">&gt;=</span> <span class="nu0">21</span> <span class="br0">&#41;</span>
    <a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="st0">'Have a beer'</span>;
<span class="kw1">else</span>
    <a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="st0">'Have a soda!'</span>;
<span class="kw1">for</span> <span class="br0">&#40;</span> <span class="re0">$i</span><span class="re2">=</span><span class="nu0">0</span>; <span class="re0">$i</span> <span class="re2">&lt;</span> <span class="re0">$age</span>; <span class="re0">$i</span>++ <span class="br0">&#41;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span> <span class="re0">$i</span> % <span class="nu0">2</span> <span class="re2">==</span> <span class="nu0">0</span> <span class="br0">&#41;</span>
        <a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="st0">&quot;Even year $i!&quot;</span>;
    <span class="kw1">else</span>
        <a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="st0">&quot;Odd year $i!&quot;</span>;</pre>
</div></p>

<p>It is considered &#8220;bad style&#8221; to not use curly braces, but it can sometimes
greatly improve the readability of your code. It is my recommendation that you
only get rid of curly braces <em>after</em> your code works.</p>

<h2>Assignment Statements As Return Values &#x2605;&#x2605;</h2>

<p>This is not a problem, just a useful explanation.</p>

<p>One thing that most people use regularly in C-like programming languages (such
as PHP) but rarely understand how it works is the implicit return on
assignment statements.</p>

<p>Simply put, <strong>assignments (with <code>=</code>) return the assigned value</strong>. Usually this
returned value is ignored. But because the <code>=</code> returns what&#8217;s to its right, we
can do interesting things like</p>

<p><div>
<pre class="php"><span class="re0">$one</span> <span class="re2">=</span> <span class="re0">$two</span> <span class="re2">=</span> <span class="re0">$three</span> <span class="re2">=</span> <span class="st0">'Hello'</span>;</pre>
</div></p>

<p>If we decompose this, we see three statements:</p>

<ol>
<li><p>The first is the right-hand side of the second equals sign:</p>

<p><div>
<pre class="php"><span class="re0">$three</span> <span class="re2">=</span> <span class="st0">'Hello'</span>;</pre>
</div></p></li>
<li><p>Since this statement returns the right-hand-side of the <code>=</code>, our original
statement is now reduced to the next statement,</p>

<p><div>
<pre class="php"><span class="re0">$one</span> <span class="re2">=</span> <span class="re0">$two</span> <span class="re2">=</span> <span class="st0">'Hello'</span>;</pre>
</div></p></li>
<li><p>Again, the right-hand-side of the first <code>=</code> is evaluated and returned, so
we now reduce our original statement to</p>

<p><div>
<pre class="php"><span class="re0">$one</span> <span class="re2">=</span> <span class="st0">'Hello'</span>;</pre>
</div></p></li>
</ol>

<p>Perhaps parentheses would help clear this up even further:</p>

<p><div>
<pre class="php"><span class="br0">&#40;</span><span class="re0">$one</span> <span class="re2">=</span> <span class="br0">&#40;</span><span class="re0">$two</span> <span class="re2">=</span> <span class="br0">&#40;</span><span class="re0">$three</span> <span class="re2">=</span> <span class="st0">'Hello'</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>These parentheses are evaluated by PHP from the inside-out: first <code>$three =
'Hello'</code> is evaluated and returns the string <code>Hello</code>. Then the next enclosing
set of parentheses is evaluated and so on.</p>

<p>This is useful many times in the boolean part of a <code>while</code> loop to do variable
assignment. An example is found in the below section, &#8220;Implementing The
<code>foreach</code> Loop.&#8221;</p>

<h2>Fencepost &#x2605;</h2>

<p>We frequently want to take a bunch of items in an array, &#8220;glue&#8221; them together,
and put something before and after the result. Imagine you want to take an
array</p>

<p><div>
<pre class="php"><span class="re0">$items</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'One'</span>,<span class="st0">'Two'</span>,<span class="st0">'Three'</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>and have output</p>

<p><div>
<pre class="html"><span class="sc2"><a href="http://december.com/html/4/element/ul.html"><span class="kw2">&lt;ul&gt;</span></a></span><span class="sc2"><a href="http://december.com/html/4/element/li.html"><span class="kw2">&lt;li&gt;</span></a></span>One<span class="sc2"><span class="kw2">&lt;/li&gt;</span></span><span class="sc2"><a href="http://december.com/html/4/element/li.html"><span class="kw2">&lt;li&gt;</span></a></span>Two<span class="sc2"><span class="kw2">&lt;/li&gt;</span></span><span class="sc2"><a href="http://december.com/html/4/element/li.html"><span class="kw2">&lt;li&gt;</span></a></span>Three<span class="sc2"><span class="kw2">&lt;/li&gt;</span></span><span class="sc2"><span class="kw2">&lt;/ul&gt;</span></span></pre>
</div></p>

<p>So what&#8217;s going on here is that we have something between (indicated by
&#8216;<code>Tween</code>&#8217; below) each of the list items &#8220;gluing&#8221; them together and then
something before and after all the &#8216;glued-together&#8217; items:</p>

<p><div>
<pre>|-Before-|     |--Tween--|     |--Tween--|       |---After--|
 &lt;ul&gt;&lt;li&gt;  One  &lt;/li&gt;&lt;li&gt;  Two  &lt;/li&gt;&lt;li&gt;  Three  &lt;/li&gt;&lt;/ul&gt;</pre>
</div></p>

<p>You can convert an array into a string using PHP&#8217;s built-in <code>implode</code> function
that takes a string and an array as arguments and returns a string.</p>

<p>This code:</p>

<p><div>
<pre class="php"><span class="re0">$characters</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'Horton'</span>,<span class="st0">'Tizzy'</span>,<span class="st0">'Hooey'</span><span class="br0">&#41;</span>;
<a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <a href="http://www.php.net/implode"><span class="kw3">implode</span></a><span class="br0">&#40;</span><span class="st0">'|'</span>, <span class="re0">$characters</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p><code>echo</code>es the string</p>

<p><div>
<pre>Horton|Tizzy|Hooey</pre>
</div></p>

<p>to the browser.</p>

<p>Using this information, create a function
<code>fencepost($arr,$before,$after,$glue)</code> that returns a string with <code>$before</code>
before and <code>$after</code> after the result of gluing <code>$arr</code> together using <code>$glue</code>
between each item.</p>

<p>So calling</p>

<p><div>
<pre class="php">fencepost<span class="br0">&#40;</span><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'a'</span>,<span class="st0">'b'</span>,<span class="st0">'c'</span><span class="br0">&#41;</span>, <span class="st0">'-&gt;'</span>, <span class="st0">'&lt;-'</span>, <span class="st0">';'</span> <span class="br0">&#41;</span>;</pre>
</div></p>

<p>returns the string</p>

<p><div>
<pre>-&gt;a;b;c&lt;-</pre>
</div></p>

<p>and calling</p>

<p><div>
<pre class="php"><span class="re0">$characters</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'Horton'</span>,<span class="st0">'Tizzy'</span>,<span class="st0">'Hooey'</span><span class="br0">&#41;</span>;
fencepost<span class="br0">&#40;</span><span class="re0">$characters</span>,<span class="st0">'&lt;ul&gt;&lt;li&gt;'</span>,<span class="st0">'&lt;/li&gt;&lt;/ul&gt;'</span>,<span class="st0">'&lt;/li&gt;&lt;li&gt;'</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>returns the string</p>

<p><div>
<pre class="html"><span class="sc2"><a href="http://december.com/html/4/element/ul.html"><span class="kw2">&lt;ul&gt;</span></a></span><span class="sc2"><a href="http://december.com/html/4/element/li.html"><span class="kw2">&lt;li&gt;</span></a></span>Horton<span class="sc2"><span class="kw2">&lt;/li&gt;</span></span><span class="sc2"><a href="http://december.com/html/4/element/li.html"><span class="kw2">&lt;li&gt;</span></a></span>Tizzy<span class="sc2"><span class="kw2">&lt;/li&gt;</span></span><span class="sc2"><a href="http://december.com/html/4/element/li.html"><span class="kw2">&lt;li&gt;</span></a></span>Hooey<span class="sc2"><span class="kw2">&lt;/li&gt;</span></span><span class="sc2"><span class="kw2">&lt;/ul&gt;</span></span></pre>
</div></p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">fencepost</span><span class="br0">&#40;</span><span class="re0">$arr</span>,<span class="re0">$before</span>,<span class="re0">$after</span>,<span class="re0">$glue</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="kw1">return</span> <span class="re0">$before</span> . <a href="http://www.php.net/implode"><span class="kw3">implode</span></a><span class="br0">&#40;</span><span class="re0">$glue</span>,<span class="re0">$arr</span><span class="br0">&#41;</span> . <span class="re0">$after</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>One-Liner &#x2605;</h2>

<p>Create a function <code>form_input_text($name,$value,$size)</code> that returns an HTML
one-line textbox with <code>name="$name"</code>, <code>value="$value"</code>, and <code>size="$size"</code>.
The last two arguments should have default values of <code>null</code> and <code>10</code>,
respectively.</p>

<p>Calling</p>

<p><div>
<pre class="php">form_input_text<span class="br0">&#40;</span><span class="st0">'email'</span>,<span class="st0">'mailer@spam.com'</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>should return</p>

<p><div>
<pre class="html"><span class="sc2"><a href="http://december.com/html/4/element/input.html"><span class="kw2">&lt;input</span></a> <span class="kw3">type</span>=<span class="st0">&quot;text&quot;</span> <span class="kw3">name</span>=<span class="st0">&quot;email&quot;</span> <span class="kw3">value</span>=<span class="st0">&quot;&quot;</span> <span class="kw3">size</span>=<span class="st0">&quot;10&quot;</span> /<span class="kw2">&gt;</span></a></span></pre>
</div></p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">form_input_text</span><span class="br0">&#40;</span><span class="re0">$name</span>,<span class="re0">$value</span><span class="re2">=</span>null,<span class="re0">$size</span><span class="re2">=</span><span class="nu0">10</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="kw1">return</span> <span class="st0">&quot;&lt;input type=<span class="es0">\&quot;</span>text<span class="es0">\&quot;</span> name=<span class="es0">\&quot;</span>$name<span class="es0">\&quot;</span>&quot;</span>
          .<span class="st0">&quot;       value=<span class="es0">\&quot;</span>$value<span class="es0">\&quot;</span>&quot;</span>
          .<span class="st0">&quot;       size=<span class="es0">\&quot;</span>$size<span class="es0">\&quot;</span> /&gt;&quot;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>Multiliner &#x2605;</h2>

<p>Create a function <code>form_textarea($name,$value,$rows,$cols)</code> that returns a
<code>&lt;textarea&gt;</code> field with the given attributes.</p>

<p>Also,</p>

<ul>
<li><code>$value</code> should default to <code>null</code>, </li>
<li><code>$rows</code> should default to <code>5</code>, and</li>
<li><code>$cols</code> should default to <code>25</code>.</li>
</ul>

<p>Calling</p>

<p><div>
<pre class="php">form_textarea<span class="br0">&#40;</span><span class="st0">'comments'</span>,<span class="st0">'Enter Comments Here'</span>,<span class="nu0">7</span><span class="br0">&#41;</span></pre>
</div></p>

<p>should return</p>

<p><div>
<pre class="html"><span class="sc2"><a href="http://december.com/html/4/element/textarea.html"><span class="kw2">&lt;textarea</span></a> <span class="kw3">name</span>=<span class="st0">&quot;comments&quot;</span>
  <span class="kw3">rows</span>=<span class="st0">&quot;7&quot;</span> <span class="kw3">cols</span>=<span class="st0">&quot;25&quot;</span><span class="kw2">&gt;</span></a></span>Enter Comments Here<span class="sc2"><span class="kw2">&lt;/textarea&gt;</span></span></pre>
</div></p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">form_textarea</span><span class="br0">&#40;</span> <span class="re0">$name</span>, <span class="re0">$value</span> <span class="re2">=</span> <span class="kw2">null</span>
                             , <span class="re0">$rows</span>  <span class="re2">=</span> <span class="nu0">5</span>
                             , <span class="re0">$cols</span>  <span class="re2">=</span> <span class="nu0">25</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="co1">// there are a lot of escaped quotes below!</span>
    <span class="kw1">return</span> <span class="st0">&quot;&lt;textarea name=<span class="es0">\&quot;</span>$name<span class="es0">\&quot;</span>&quot;</span>
          .<span class="st0">&quot;   rows=<span class="es0">\&quot;</span>$rows<span class="es0">\&quot;</span> cols=<span class="es0">\&quot;</span>$cols<span class="es0">\&quot;</span>&quot;</span>
          .<span class="st0">&quot;&gt;$value&lt;/textarea&gt;&quot;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>HTML Dropdown &#x2605;&#x2605;</h2>

<p>Create a function <code>dropdown($arr,$selected_key,$name)</code> that creates an HTML
dropdown (an <code>&lt;option&gt;</code>s) field with one entry for each key/value pair in
<code>$arr</code>. The <code>&lt;select&gt;</code> tag surrounding the options should have <code>name="$name"</code>.
If any of the keys from the array matches <code>$selected_key</code>, then it should have
a <code>selected="selected"</code> bit added to its associated <code>&lt;option&gt;</code>.</p>

<p>We have a bit of confusion in terminology about &#8220;value&#8221; though because we want</p>

<p><div>
<pre class="php">dropdown<span class="br0">&#40;</span><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st0">'WA'</span> <span class="re2">=&gt;</span> <span class="st0">'Washington'</span>,
    <span class="st0">'OR'</span> <span class="re2">=&gt;</span> <span class="st0">'Oregon'</span>,
    <span class="st0">'CA'</span> <span class="re2">=&gt;</span> <span class="st0">'California'</span>
    <span class="br0">&#41;</span>,<span class="st0">'WA'</span>,<span class="st0">'state'</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>to return</p>

<p><div>
<pre class="html"><span class="sc2"><a href="http://december.com/html/4/element/select.html"><span class="kw2">&lt;select</span></a> <span class="kw3">name</span>=<span class="st0">&quot;state&quot;</span><span class="kw2">&gt;</span></a></span>
    <span class="sc2"><a href="http://december.com/html/4/element/option.html"><span class="kw2">&lt;option</span></a> <span class="kw3">value</span>=<span class="st0">&quot;WA&quot;</span> <span class="kw3">selected</span>=<span class="st0">&quot;selected&quot;</span><span class="kw2">&gt;</span></a></span>
        Washington
    <span class="sc2"><span class="kw2">&lt;/option&gt;</span></span><span class="sc2"><a href="http://december.com/html/4/element/option.html"><span class="kw2">&lt;option</span></a> <span class="kw3">value</span>=<span class="st0">&quot;OR&quot;</span><span class="kw2">&gt;</span></a></span>
        Oregon
    <span class="sc2"><span class="kw2">&lt;/option&gt;</span></span><span class="sc2"><a href="http://december.com/html/4/element/option.html"><span class="kw2">&lt;option</span></a> <span class="kw3">value</span>=<span class="st0">&quot;CA&quot;</span><span class="kw2">&gt;</span></a></span>
        California
    <span class="sc2"><span class="kw2">&lt;/option&gt;</span></span>
<span class="sc2"><span class="kw2">&lt;/select&gt;</span></span></pre>
</div></p>

<p>So in the HTML, the <code>value</code> attribute to the <code>option</code> tag corresponds to the
key from the array.</p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">dropdown</span><span class="br0">&#40;</span><span class="re0">$arr</span>,<span class="re0">$selected_key</span>,<span class="re0">$name</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$acc</span> <span class="re2">=</span> <span class="st0">&quot;&lt;select name=<span class="es0">\&quot;</span>$name<span class="es0">\&quot;</span>&gt;&quot;</span>;
    <span class="kw1">foreach</span> <span class="br0">&#40;</span> <span class="re0">$arr</span> <span class="kw1">as</span> <span class="re0">$key</span><span class="re2">=&gt;</span><span class="re0">$val</span> <span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="re0">$acc</span> .<span class="re2">=</span> <span class="st0">&quot;<span class="es0">\n</span><span class="es0">\t</span>&lt;option value=<span class="es0">\&quot;</span>$key<span class="es0">\&quot;</span>&quot;</span>;
        <span class="kw1">if</span> <span class="br0">&#40;</span> <span class="re0">$selected_key</span> <span class="re2">==</span> <span class="re0">$key</span> <span class="br0">&#41;</span>
            <span class="re0">$acc</span> .<span class="re2">=</span> <span class="st0">&quot; selected=<span class="es0">\&quot;</span>selected<span class="es0">\&quot;</span>&quot;</span>
        <span class="re0">$acc</span> .<span class="re2">=</span> <span class="st0">&quot;&gt;<span class="es0">\n</span><span class="es0">\t</span><span class="es0">\t</span>$val<span class="es0">\n</span><span class="es0">\t</span>&lt;/option&gt;&quot;</span>;
    <span class="br0">&#125;</span>
    <span class="re0">$acc</span> .<span class="re2">=</span> <span class="st0">&quot;<span class="es0">\n</span>&lt;/select&gt;&quot;</span>;
    <span class="kw1">return</span> <span class="re0">$acc</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>Checkboxer  &#x2605;&#x2605;</h2>

<p>Define a function <code>checkboxer($data,$selected,$name)</code> that takes two arrays
and a string as parameters and returns an <strong>array</strong> of strings: one string for
each key/value pair in <code>$data</code>.</p>

<p><code>$data</code> contains the key/value pairs for the generated checkboxen: the keys
being the &#8220;internal&#8221; representation of the value while the value being the
&#8220;UI&#8221;&#8212;user-friendly&#8212;version that also becomes the key for the checkbox in the
returned array. The name of each of the boxen should be <code>$name</code>.</p>

<p><code>$data</code> looks something like</p>

<p><div>
<pre class="php"><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st0">'dogs'</span> <span class="re2">=&gt;</span> <span class="st0">'Dogs'</span>,
    <span class="st0">'cats'</span> <span class="re2">=&gt;</span> <span class="st0">'Cats'</span>,
    <span class="st0">'fish'</span> <span class="re2">=&gt;</span> <span class="st0">'Fish'</span>,
<span class="br0">&#41;</span></pre>
</div></p>

<p>while <code>$selected</code> is the list of keys in <code>$data</code> that should be indicated with
<code>checked="checked"</code>.</p>

<p>So the following code</p>

<p><div>
<pre class="php">checkboxer<span class="br0">&#40;</span><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st0">'dogs'</span> <span class="re2">=&gt;</span> <span class="st0">'Dogs'</span>,
    <span class="st0">'cats'</span> <span class="re2">=&gt;</span> <span class="st0">'Cats'</span>,
    <span class="st0">'fish'</span> <span class="re2">=&gt;</span> <span class="st0">'Fish'</span>,
  <span class="br0">&#41;</span>,<a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st0">'dogs'</span>,<span class="st0">'fish'</span>
<span class="br0">&#41;</span>,<span class="st0">'animal[]'</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>should return</p>

<p><div>
<pre class="php"><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st0">&quot;Dogs&quot;</span> <span class="re2">=&gt;</span> <span class="st0">&quot;&lt;input type=<span class="es0">\&quot;</span>checkbox<span class="es0">\&quot;</span>
                      name=<span class="es0">\&quot;</span>animal[]<span class="es0">\&quot;</span>
                      value=<span class="es0">\&quot;</span>dogs<span class="es0">\&quot;</span>
                      checked=<span class="es0">\&quot;</span>checked<span class="es0">\&quot;</span> /&gt;&quot;</span>,
    <span class="st0">&quot;Cats&quot;</span> <span class="re2">=&gt;</span> <span class="st0">&quot;&lt;input type=<span class="es0">\&quot;</span>checkbox<span class="es0">\&quot;</span>
                      name=<span class="es0">\&quot;</span>animal[]<span class="es0">\&quot;</span>
                      value=<span class="es0">\&quot;</span>cats<span class="es0">\&quot;</span> /&gt;&quot;</span>,
    <span class="st0">&quot;Fish&quot;</span> <span class="re2">=&gt;</span> <span class="st0">&quot;&lt;input type=<span class="es0">\&quot;</span>checkbox<span class="es0">\&quot;</span>
                      name=<span class="es0">\&quot;</span>animal[]<span class="es0">\&quot;</span>
                      value=<span class="es0">\&quot;</span>fish<span class="es0">\&quot;</span>
                      checked=<span class="es0">\&quot;</span>checked<span class="es0">\&quot;</span> /&gt;&quot;</span>
<span class="br0">&#41;</span></pre>
</div></p>

<p><strong>Solution left as an exercise.</strong></p>

<h2>Random Array Element 1 &#x2605;&#x2605;</h2>

<p>Write a function <code>random_element($arr)</code> that returns a random element from
<code>$arr</code> assuming that the array only has keys starting at 0 and going up to
<code>count($arr)-1</code>.</p>

<p>(This function will work on an array like <code>array(2,4,6,8)</code> or <code>array('horton',
'hooey')</code> but will not work on an array like <code>array('horton'=&gt;'elephant',
'owl'=&gt;'hooey')</code>.</p>

<p>You can use PHP&#8217;s built-in <code>rand($min,$max)</code> function that returns a random
integer between <code>$min</code> and <code>$max</code> (inclusive).</p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">random_element</span><span class="br0">&#40;</span><span class="re0">$arr</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$len</span> <span class="re2">=</span> <a href="http://www.php.net/count"><span class="kw3">count</span></a><span class="br0">&#40;</span><span class="re0">$arr</span><span class="br0">&#41;</span>;
    <span class="re0">$max</span> <span class="re2">=</span> <span class="re0">$len</span> - <span class="nu0">1</span>;
    <span class="re0">$key</span> <span class="re2">=</span> <a href="http://www.php.net/rand"><span class="kw3">rand</span></a><span class="br0">&#40;</span><span class="nu0">0</span>,<span class="re0">$max</span><span class="br0">&#41;</span>
    <span class="kw1">return</span> <span class="re0">$arr</span><span class="br0">&#91;</span><span class="re0">$key</span><span class="br0">&#93;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

<p>or the &#8216;simpler,&#8217; one-line version:</p>

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">random_element</span><span class="br0">&#40;</span><span class="re0">$a</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="kw1">return</span> <span class="re0">$a</span><span class="br0">&#91;</span><a href="http://www.php.net/rand"><span class="kw3">rand</span></a><span class="br0">&#40;</span><span class="nu0">0</span>,<a href="http://www.php.net/count"><span class="kw3">count</span></a><span class="br0">&#40;</span><span class="re0">$a</span><span class="br0">&#41;</span><span class="nu0">-1</span><span class="br0">&#41;</span><span class="br0">&#93;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>Array Keys &#x2605;&#x2605;</h2>

<p>PHP has a built-in function, <code>array_keys($arr)</code>, that returns an array of the
keys used in <code>$arr</code>. Pretend this function doesn&#8217;t exist and create your own
function called <code>my_array_keys($arr)</code> that returns the keys used in <code>$arr</code>.</p>

<p>So running</p>

<p><div>
<pre class="php">my_array_keys<span class="br0">&#40;</span><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st0">'Red'</span>,<span class="st0">'Green'</span>,<span class="st0">'Blue'</span>
<span class="br0">&#41;</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>returns</p>

<p><div>
<pre class="php"><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="nu0">0</span>,<span class="nu0">1</span>,<span class="nu0">2</span><span class="br0">&#41;</span></pre>
</div></p>

<p>and running</p>

<p><div>
<pre class="php">my_array_keys<span class="br0">&#40;</span><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
   <span class="st0">'Name'</span>   <span class="re2">=&gt;</span> <span class="st0">'Mickey'</span>,
   <span class="st0">'Animal'</span> <span class="re2">=&gt;</span> <span class="st0">'Mouse'</span>,
   <span class="st0">'Minnie'</span>
<span class="br0">&#41;</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>returns</p>

<p><div>
<pre class="php"><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'Name'</span>,<span class="st0">'Animal'</span>,<span class="nu0">0</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>(The <code>0</code> at the end is because the value <code>Minnie</code> is added to the array
without a designated, pre-defined key. When this happens, PHP chooses the
<strong>next available numeric key</strong>, and since there are no other numeric keys in
the array, <code>0</code> is the next available numeric key.)</p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">my_array_keys</span><span class="br0">&#40;</span><span class="re0">$arr</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$tor</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="kw1">foreach</span><span class="br0">&#40;</span> <span class="re0">$arr</span> <span class="kw1">as</span> <span class="re0">$key</span><span class="re2">=&gt;</span><span class="re0">$val</span> <span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="re0">$tor</span><span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="re2">=</span> <span class="re0">$key</span>;
    <span class="br0">&#125;</span>
    <span class="kw1">return</span> <span class="re0">$tor</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>Random Array Element 2 &#x2605;&#x2605;</h2>

<p>Our previous version of <code>random_element</code> above only allowed for arrays like</p>

<p><div>
<pre class="php"><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'Horton'</span>,<span class="st0">'Hooey'</span>,<span class="st0">'Tizzy'</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>but would not work on something like</p>

<p><div>
<pre class="php"><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>  <span class="st0">'Horton'</span> <span class="re2">=&gt;</span> <span class="st0">'Elephant'</span>,
        <span class="st0">'Hooey'</span>  <span class="re2">=&gt;</span> <span class="st0">'Owl'</span>,
        <span class="st0">'Cat'</span>    <span class="re2">=&gt;</span> <span class="st0">'Cat'</span>       <span class="br0">&#41;</span>;</pre>
</div></p>

<p>Modify your existing <code>random_element</code> to become a new function called
<code>random_pair($arr)</code> to handle associative arrays: it should return a random
key/value pair in the form of an array: let&#8217;s call it <code>$returned</code> where
<code>$returned[0]</code> is the randomly-chosen key and <code>$returned[1]</code> is the value
associated with that randomly-chosen key.</p>

<p>So calling</p>

<p><div>
<pre class="php">random_element<span class="br0">&#40;</span><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
        <span class="st0">'Horton'</span> <span class="re2">=&gt;</span> <span class="st0">'Elephant'</span>,
        <span class="st0">'Hooey'</span>  <span class="re2">=&gt;</span> <span class="st0">'Owl'</span>,
        <span class="st0">'Cat'</span>    <span class="re2">=&gt;</span> <span class="st0">'Cat'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>might return</p>

<p><div>
<pre class="php"><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'Horton'</span>,<span class="st0">'Elephant'</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>or it might return</p>

<p><div>
<pre class="php"><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'Cat'</span>,<span class="st0">'Cat'</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p><strong>Hint</strong>: There is very little new here. You&#8217;ll want to find a list of the
array&#8217;s keys (i.e., the previous problem) and pick a random key from this list
(solved in our last version of this problem) and then simply return an array
of this key and the array&#8217;s value at this key.</p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">random_pair</span><span class="br0">&#40;</span><span class="re0">$arr</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$keys</span>     <span class="re2">=</span> <a href="http://www.php.net/array_keys"><span class="kw3">array_keys</span></a><span class="br0">&#40;</span><span class="re0">$arr</span><span class="br0">&#41;</span>;
    <span class="re0">$len_keys</span> <span class="re2">=</span> <a href="http://www.php.net/count"><span class="kw3">count</span></a><span class="br0">&#40;</span><span class="re0">$keys</span><span class="br0">&#41;</span>;
    <span class="re0">$max_key</span>  <span class="re2">=</span> <span class="re0">$len_keys</span> - <span class="nu0">1</span>;
    <span class="re0">$key_key</span>  <span class="re2">=</span> <a href="http://www.php.net/rand"><span class="kw3">rand</span></a><span class="br0">&#40;</span><span class="nu0">0</span>,<span class="re0">$max_key</span><span class="br0">&#41;</span>;
    <span class="re0">$rand_key</span> <span class="re2">=</span> <span class="re0">$keys</span><span class="br0">&#91;</span><span class="re0">$key_key</span><span class="br0">&#93;</span>;
    <span class="re0">$value</span>    <span class="re2">=</span> <span class="re0">$arr</span><span class="br0">&#91;</span><span class="re0">$rand_key</span><span class="br0">&#93;</span>;
    <span class="kw1">return</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span> <span class="re0">$rand_key</span>, <span class="re0">$value</span> <span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

<p>or the simpler, three-line version:</p>

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">random_pair</span><span class="br0">&#40;</span><span class="re0">$arr</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$keys</span>  <span class="re2">=</span> <a href="http://www.php.net/array_keys"><span class="kw3">array_keys</span></a><span class="br0">&#40;</span><span class="re0">$arr</span><span class="br0">&#41;</span>;
    <span class="re0">$randk</span> <span class="re2">=</span> <span class="re0">$keys</span><span class="br0">&#91;</span><a href="http://www.php.net/rand"><span class="kw3">rand</span></a><span class="br0">&#40;</span><span class="nu0">0</span>,<a href="http://www.php.net/count"><span class="kw3">count</span></a><span class="br0">&#40;</span><span class="re0">$keys</span><span class="br0">&#41;</span><span class="nu0">-1</span><span class="br0">&#41;</span><span class="br0">&#93;</span>;
    <span class="kw1">return</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="re0">$randk</span>,<span class="re0">$arr</span><span class="br0">&#91;</span><span class="re0">$randk</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>Array Merging &#x2605;&#x2605;</h2>

<p>Create a function <code>vjoin($keys,$values)</code> that takes two arrays of the same
length and combines them: the first array becomes the <strong>keys</strong> while the second
array becomes the <strong>values</strong> for the keys at the same position.</p>

<p>(The &#8216;v&#8217; in &#8216;vjoin&#8217; is for <em>value</em>, since we&#8217;re joining our two keys together
on their values.)</p>

<p>Note that this function is built into PHP and is called
<code>array_combine($keys,$values)</code>. Pretend that it does not exist for your
solution, however :).</p>

<p>So running</p>

<p><div>
<pre class="php">vjoin
<span class="br0">&#40;</span>   <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'WA'</span>,<span class="st0">'OR'</span>,<span class="st0">'CA'</span><span class="br0">&#41;</span>,
    <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'Washington'</span>,<span class="st0">'Oregon'</span>,<span class="st0">'California'</span><span class="br0">&#41;</span>
<span class="br0">&#41;</span>;</pre>
</div></p>

<p>returns</p>

<p><div>
<pre class="php"><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st0">'WA'</span> <span class="re2">=&gt;</span> <span class="st0">'Washington'</span>,
    <span class="st0">'OR'</span> <span class="re2">=&gt;</span> <span class="st0">'Oregon'</span>,
    <span class="st0">'CA'</span> <span class="re2">=&gt;</span> <span class="st0">'California'</span>
<span class="br0">&#41;</span></pre>
</div></p>

<div class="showhide" title="">

<p>Here is a simple version:</p>

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">vjoin</span><span class="br0">&#40;</span><span class="re0">$keys</span>,<span class="re0">$vals</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$out</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="re0">$c</span>   <span class="re2">=</span> <a href="http://www.php.net/count"><span class="kw3">count</span></a><span class="br0">&#40;</span><span class="re0">$keys</span><span class="br0">&#41;</span>;
    <span class="kw1">for</span><span class="br0">&#40;</span> <span class="re0">$i</span><span class="re2">=</span><span class="nu0">0</span>; <span class="re0">$i</span><span class="re2">&lt;</span><span class="re0">$c</span>; <span class="re0">$i</span>++ <span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="re0">$key</span>       <span class="re2">=</span> <span class="re0">$keys</span><span class="br0">&#91;</span><span class="re0">$i</span><span class="br0">&#93;</span>;
        <span class="re0">$out</span><span class="br0">&#91;</span><span class="re0">$key</span><span class="br0">&#93;</span> <span class="re2">=</span> <span class="re0">$vals</span><span class="br0">&#91;</span><span class="re0">$i</span><span class="br0">&#93;</span>;
    <span class="br0">&#125;</span>
    <span class="kw1">return</span> <span class="re0">$out</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>Array Flip &#x2605;&#x2605;</h2>

<p>PHP has a built-in function called <code>array_flip($arr)</code> that returns an array
with <code>$arr</code>&#8217;s keys/values exchanged. Pretend this function does not exist and
create your own version <code>my_array_flip($arr)</code>.</p>

<p>So running</p>

<p><div>
<pre class="php"><span class="re0">$a</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span> <span class="st0">'One'</span> <span class="re2">=&gt;</span> <span class="nu0">1</span>, <span class="st0">'Two'</span> <span class="re2">=&gt;</span> <span class="nu0">2</span>, <span class="st0">'Three'</span> <span class="re2">=&gt;</span> <span class="nu0">3</span> <span class="br0">&#41;</span>;
<span class="re0">$b</span> <span class="re2">=</span> my_array_flip<span class="br0">&#40;</span><span class="re0">$a</span><span class="br0">&#41;</span></pre>
</div></p>

<p>should result in <code>$b</code> being</p>

<p><div>
<pre class="php"><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span> <span class="nu0">1</span> <span class="re2">=&gt;</span> <span class="st0">'One'</span>, <span class="nu0">2</span> <span class="re2">=&gt;</span> <span class="st0">'Two'</span>, <span class="nu0">3</span> <span class="re2">=&gt;</span> <span class="st0">'Three'</span> <span class="br0">&#41;</span></pre>
</div></p>

<p>And running</p>

<p><div>
<pre class="php"><span class="re0">$a</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span> <span class="st0">'Horton'</span>    <span class="re2">=&gt;</span> <span class="st0">'Elephant'</span>,
            <span class="st0">'Hooey'</span>     <span class="re2">=&gt;</span> <span class="st0">'Parrot'</span>,
            <span class="st0">'Tizzy'</span>     <span class="re2">=&gt;</span> <span class="st0">'Turtle'</span>     <span class="br0">&#41;</span>;
<span class="re0">$b</span> <span class="re2">=</span> my_array_flip<span class="br0">&#40;</span><span class="re0">$a</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>should result in <code>$b</code> being</p>

<p><div>
<pre class="php"><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span> <span class="st0">'Elephant'</span>  <span class="re2">=&gt;</span>  <span class="st0">'Horton'</span>,
       <span class="st0">'Parrot'</span>    <span class="re2">=&gt;</span>  <span class="st0">'Hooey'</span>,
       <span class="st0">'Turtle'</span>    <span class="re2">=&gt;</span>  <span class="st0">'Tizzy'</span>      <span class="br0">&#41;</span>;</pre>
</div></p>

<p>For a bit more of a challenge, try writing this one using <code>vjoin</code>, defined in
a previous problem. (Hint: use the built-in <code>array_keys</code> and <code>array_values</code>
functions.)</p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">my_array_flip</span><span class="br0">&#40;</span><span class="re0">$arr</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$out</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="kw1">foreach</span> <span class="br0">&#40;</span> <span class="re0">$arr</span> <span class="kw1">as</span> <span class="re0">$key</span> <span class="re2">=&gt;</span> <span class="re0">$val</span> <span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="re0">$out</span><span class="br0">&#91;</span><span class="re0">$val</span><span class="br0">&#93;</span> <span class="re2">=</span> <span class="re0">$key</span>;
    <span class="br0">&#125;</span>
    <span class="kw1">return</span> <span class="re0">$out</span>;
<span class="br0">&#125;</span></pre>
</div></p>

<p>Here&#8217;s the &#8220;challenge&#8221; solution using <code>vjoin</code>:</p>

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">my_array_flip</span><span class="br0">&#40;</span><span class="re0">$arr</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="kw1">return</span> vjoin<span class="br0">&#40;</span><a href="http://www.php.net/array_values"><span class="kw3">array_values</span></a><span class="br0">&#40;</span><span class="re0">$arr</span><span class="br0">&#41;</span>,<a href="http://www.php.net/array_keys"><span class="kw3">array_keys</span></a><span class="br0">&#40;</span><span class="re0">$arr</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>Array Unique &#x2605;&#x2605;</h2>

<p>PHP has a built-in function called <code>array_unique($a)</code> that takes an array as
an argument and returns a new array without duplicate values. Keys are
preserved.</p>

<p>Pretend this function does not exist and create your own <code>my_array_unique($a)</code>
that returns a new array with no duplicated values.</p>

<p>So calling</p>

<p><div>
<pre class="php">my_array_unique<span class="br0">&#40;</span><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span> 
    <span class="st0">'one'</span> <span class="re2">=&gt;</span> <span class="nu0">1</span>, <span class="st0">'two'</span> <span class="re2">=&gt;</span> <span class="nu0">2</span>, 
    <span class="st0">'une'</span> <span class="re2">=&gt;</span> <span class="nu0">1</span>, <span class="st0">'ein'</span> <span class="re2">=&gt;</span> <span class="nu0">1</span> <span class="br0">&#41;</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>returns the array</p>

<p><div>
<pre class="php"><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>  <span class="st0">'ein'</span> <span class="re2">=&gt;</span> <span class="nu0">1</span>,
        <span class="st0">'two'</span> <span class="re2">=&gt;</span> <span class="nu0">2</span> <span class="br0">&#41;</span></pre>
</div></p>

<p>(Note that your solution might also return <code>array('one'=&gt;1,'two'=&gt;2)</code> or
<code>array('une'=&gt;1,'two'=&gt;2)</code>, it doesn&#8217;t matter.</p>

<p><strong>Hint</strong> One solution is to use <code>my_array_flip</code> twice. (Why does this work?) A
&#8216;more mundane&#8217; solution exists as well, of course.</p>

<div class="showhide" title="">

<p>Here is a version that uses the <code>my_array_flip</code> function defined above. (You
could also use the built-in <code>array_flip</code> function to exactly the same effect.)</p>

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">my_array_unique</span><span class="br0">&#40;</span><span class="re0">$arr</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="kw1">return</span> my_array_flip<span class="br0">&#40;</span>my_array_flip<span class="br0">&#40;</span><span class="re0">$arr</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

<p>Here is a more intuitive solution:</p>

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">my_array_unique</span><span class="br0">&#40;</span><span class="re0">$arr</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$out</span>  <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="re0">$seen</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="kw1">foreach</span> <span class="br0">&#40;</span> <span class="re0">$arr</span> <span class="kw1">as</span> <span class="re0">$key</span> <span class="re2">=&gt;</span> <span class="re0">$value</span> <span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="kw1">if</span> <span class="br0">&#40;</span> !<a href="http://www.php.net/isset"><span class="kw3">isset</span></a><span class="br0">&#40;</span><span class="re0">$seen</span><span class="br0">&#91;</span><span class="re0">$value</span><span class="br0">&#93;</span><span class="br0">&#41;</span> || !<span class="re0">$seen</span><span class="br0">&#91;</span><span class="re0">$value</span><span class="br0">&#93;</span> <span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            <span class="re0">$out</span><span class="br0">&#91;</span><span class="re0">$key</span><span class="br0">&#93;</span>    <span class="re2">=</span> <span class="re0">$value</span>;
            <span class="re0">$seen</span><span class="br0">&#91;</span><span class="re0">$value</span><span class="br0">&#93;</span> <span class="re2">=</span> <span class="kw2">true</span>;
        <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
    <span class="kw1">return</span> <span class="re0">$out</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>Associative Implode &#x2605;&#x2605;</h2>

<p>Unfortunately <code>implode</code> does not work for associative arrays. The <code>implode</code>
function will only return results based on the <strong>values</strong> of the array, not
the <em>keys</em>.</p>

<p>So running</p>

<p><div>
<pre class="php"><a href="http://www.php.net/implode"><span class="kw3">implode</span></a><span class="br0">&#40;</span><span class="st0">';'</span>,<a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'name'</span><span class="re2">=&gt;</span><span class="st0">'Horton'</span>,<span class="st0">'species'</span><span class="re2">=&gt;</span><span class="st0">'Elephant'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>returns <code>Horton;Elephant</code> and pays no mind to <code>name</code> or <code>species</code>.</p>

<p>Your job is to make a function <code>associative_implode($glue,$separator,$arr)</code>
that returns a string. The first part of the string should be all of <code>$arr</code>&#8217;s
keys with <code>$glue</code> between them. Then there should be <code>$separator</code> followed by
all of <code>$arr</code>&#8217;s <em>values</em> with <code>$glue</code> between them.</p>

<p>(You do not need to check whether any of the keys or values in <code>$arr</code> have
your <code>$glue</code> or <code>$separator</code> in them, but this is a &#8220;failure point&#8221; for this
function. Note that PHP&#8217;s built-in <code>implode</code> function does not care in this
circumstance. So calling</p>

<p><div>
<pre class="php"><a href="http://www.php.net/implode"><span class="kw3">implode</span></a><span class="br0">&#40;</span><span class="st0">'e'</span>,<a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'one'</span>,<span class="st0">'two'</span>,<span class="st0">'three'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>returns the string</p>

<p><div>
<pre>oneetwoethree</pre>
</div></p>

<p>Dealing with this in the general case is difficult.)</p>

<p>So running</p>

<p><div>
<pre class="php">associative_implode<span class="br0">&#40;</span>
    <span class="st0">';'</span>, <span class="st0">'||'</span>,
    <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span> <span class="st0">'name'</span>    <span class="re2">=&gt;</span> <span class="st0">'Horton'</span>,
           <span class="st0">'species'</span> <span class="re2">=&gt;</span> <span class="st0">'Elephant'</span> <span class="br0">&#41;</span>
<span class="br0">&#41;</span>;</pre>
</div></p>

<p>returns the string <code>name;species||Horton;Elephant</code>.  And running</p>

<p><div>
<pre class="php">associative_implode<span class="br0">&#40;</span>
    <span class="st0">';'</span>, <span class="st0">'||'</span>,
    <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'Horton'</span>,<span class="st0">'Tizzy'</span>,<span class="st0">'Hooey'</span><span class="br0">&#41;</span>
<span class="br0">&#41;</span>;</pre>
</div></p>

<p>returns the string</p>

<p><div>
<pre>0;1;2||Horton;Tizzy;Hooey</pre>
</div></p>

<p>Hint: Use the built-in <code>implode</code> function and the built-in <code>array_keys</code> and
<code>array_values</code> functions. Look up the <a href="http://us2.php.net/array">Array Functions</a> page on the PHP
web site for more information.</p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">associative_implode</span><span class="br0">&#40;</span><span class="re0">$glue</span>,<span class="re0">$separator</span>,<span class="re0">$arr</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="kw1">return</span> <a href="http://www.php.net/implode"><span class="kw3">implode</span></a><span class="br0">&#40;</span><span class="re0">$glue</span>,<a href="http://www.php.net/array_keys"><span class="kw3">array_keys</span></a><span class="br0">&#40;</span><span class="re0">$arr</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
           . <span class="re0">$separator</span>
           . <a href="http://www.php.net/implode"><span class="kw3">implode</span></a><span class="br0">&#40;</span><span class="re0">$glue</span>,<a href="http://www.php.net/array_values"><span class="kw3">array_values</span></a><span class="br0">&#40;</span><span class="re0">$arr</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>Associative Explode &#x2605;&#x2605;&#x2605;</h2>

<p>Now write the &#8220;inverse&#8221; of your <code>associative_implode</code> function (just above
this one). We&#8217;ll call this <code>associative_explode($glue,$separator,$str)</code>. This
function takes a string <code>$str</code> and breaks into an associative array.</p>

<p>Running</p>

<p><div>
<pre class="php">associative_explode<span class="br0">&#40;</span><span class="st0">';'</span>,<span class="st0">'||'</span>,<span class="st0">'0;1;2||Horton;Tizzy;Hooey'</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>returns</p>

<p><div>
<pre class="php"><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>  <span class="st0">'0'</span> <span class="re2">=&gt;</span> <span class="st0">'Horton'</span>,
        <span class="st0">'1'</span> <span class="re2">=&gt;</span> <span class="st0">'Tizzy'</span>,
        <span class="st0">'2'</span> <span class="re2">=&gt;</span> <span class="st0">'Hooey'</span>  <span class="br0">&#41;</span>;</pre>
</div></p>

<p>and running</p>

<p><div>
<pre class="php">associative_explode<span class="br0">&#40;</span><span class="st0">';'</span>,<span class="st0">'||'</span>,<span class="st0">'name;species||Horton;Elephant'</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>returns</p>

<p><div>
<pre class="php"><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>  <span class="st0">'name'</span>    <span class="re2">=&gt;</span> <span class="st0">'Horton'</span>,
        <span class="st0">'species'</span> <span class="re2">=&gt;</span> <span class="st0">'Elephant'</span>  <span class="br0">&#41;</span>;</pre>
</div></p>

<p>Hint: Use the built-in <code>explode</code> function a total of three times and then use
the <code>vjoin($keys,$vals)</code> function we made in the &#8220;Array Merging&#8221; section
above.</p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">associative_explode</span><span class="br0">&#40;</span><span class="re0">$glue</span>,<span class="re0">$separator</span>,<span class="re0">$str</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$separated</span> <span class="re2">=</span> <a href="http://www.php.net/explode"><span class="kw3">explode</span></a><span class="br0">&#40;</span><span class="re0">$separator</span>,<span class="re0">$str</span><span class="br0">&#41;</span>;
    <span class="co1">// $separated is now something like</span>
    <span class="co1">//     array( 'name;species', 'Horton;Elephant' );</span>
&nbsp;
    <span class="re0">$keys</span> <span class="re2">=</span> <a href="http://www.php.net/explode"><span class="kw3">explode</span></a><span class="br0">&#40;</span><span class="re0">$glue</span>,<span class="re0">$separated</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;
    <span class="co1">// $keys is now something like</span>
    <span class="co1">//     array( 'name', 'species' );</span>
&nbsp;
    <span class="re0">$vals</span> <span class="re2">=</span> <a href="http://www.php.net/explode"><span class="kw3">explode</span></a><span class="br0">&#40;</span><span class="re0">$glue</span>,<span class="re0">$separated</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;
    <span class="co1">// $vals is now something like</span>
    <span class="co1">//     array( 'Horton', 'Elephant' );</span>
&nbsp;
    <span class="kw1">return</span> vjoin<span class="br0">&#40;</span><span class="re0">$keys</span>,<span class="re0">$vals</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>Not Defined In &#x2605;&#x2605;</h2>

<p>Make a function <code>not_defined_in($words_to_errors,$dictionary)</code> that returns
the <code>$word_to_errors</code> entries for the keys that are not also defined in
<code>$dictionary.</code></p>

<p>So the following</p>

<p><div>
<pre class="php"><span class="re0">$words_to_errors</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a>
<span class="br0">&#40;</span>
    <span class="st0">'name'</span>  <span class="re2">=&gt;</span> <span class="st0">'I need your name!'</span>,
    <span class="st0">'email'</span> <span class="re2">=&gt;</span> <span class="st0">'I want your email address.'</span>,
    <span class="st0">'age'</span>   <span class="re2">=&gt;</span> <span class="st0">'Hey, how old are you?!'</span>
<span class="br0">&#41;</span>;
<span class="re0">$dictionary</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a>
<span class="br0">&#40;</span>
    <span class="st0">'name'</span>  <span class="re2">=&gt;</span> <span class="st0">'Billy Jean'</span>,
    <span class="st0">'email'</span> <span class="re2">=&gt;</span> <span class="st0">'Isnotmylover@hotmail.com'</span>
<span class="br0">&#41;</span>
not_defined_in<span class="br0">&#40;</span><span class="re0">$words_to_errors</span>,<span class="re0">$dictionary</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>should return</p>

<p><div>
<pre class="php"><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st0">'age'</span> <span class="re2">=&gt;</span> <span class="st0">'Hey, how old are you?!'</span>
<span class="br0">&#41;</span>;</pre>
</div></p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">not_defined_in</span><span class="br0">&#40;</span><span class="re0">$words_to_errors</span>,<span class="re0">$dictionary</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$toreturn</span>      <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="re0">$defined_words</span> <span class="re2">=</span> <a href="http://www.php.net/array_keys"><span class="kw3">array_keys</span></a><span class="br0">&#40;</span><span class="re0">$dictionary</span><span class="br0">&#41;</span>;
    <span class="kw1">foreach</span> <span class="br0">&#40;</span> <span class="re0">$words_to_errors</span> <span class="kw1">as</span> <span class="re0">$word</span><span class="re2">=&gt;</span><span class="re0">$error</span> <span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="kw1">if</span> <span class="br0">&#40;</span> ! <a href="http://www.php.net/in_array"><span class="kw3">in_array</span></a><span class="br0">&#40;</span><span class="re0">$word</span>,<span class="re0">$defined_words</span><span class="br0">&#41;</span> <span class="br0">&#41;</span>
            <span class="re0">$toreturn</span><span class="br0">&#91;</span><span class="re0">$word</span><span class="br0">&#93;</span> <span class="re2">=</span> <span class="re0">$error</span>
    <span class="br0">&#125;</span>
    <span class="kw1">return</span> <span class="re0">$toreturn</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>Menu Mapping &#x2605;</h2>

<p>Make a function <code>array_to_menu($array)</code> that takes an associative array
mapping link titles to URLs and that returns an unordered list of links (in
HTML) representing that.</p>

<p>So</p>

<p><div>
<pre class="php"><span class="re0">$menu</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a>
<span class="br0">&#40;</span>
    <span class="st0">'Home Page'</span>     <span class="re2">=&gt;</span> <span class="st0">'index.php'</span>,
    <span class="st0">'About Us'</span>      <span class="re2">=&gt;</span> <span class="st0">'about.php'</span>,
    <span class="st0">'Contact Us'</span>    <span class="re2">=&gt;</span> <span class="st0">'contact.php'</span>
<span class="br0">&#41;</span>;
<a href="http://www.php.net/echo"><span class="kw3">echo</span></a> array_to_menu<span class="br0">&#40;</span><span class="re0">$menu</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>should print to the browser</p>

<p><div>
<pre class="html"><span class="sc2"><a href="http://december.com/html/4/element/ul.html"><span class="kw2">&lt;ul&gt;</span></a></span>
    <span class="sc2"><a href="http://december.com/html/4/element/li.html"><span class="kw2">&lt;li&gt;</span></a></span><span class="sc2"><a href="http://december.com/html/4/element/a.html"><span class="kw2">&lt;a</span></a> <span class="kw3">href</span>=<span class="st0">&quot;index.php&quot;</span><span class="kw2">&gt;</span></a></span>Home Page<span class="sc2"><span class="kw2">&lt;/a&gt;</span></span><span class="sc2"><span class="kw2">&lt;/li&gt;</span></span>
    <span class="sc2"><a href="http://december.com/html/4/element/li.html"><span class="kw2">&lt;li&gt;</span></a></span><span class="sc2"><a href="http://december.com/html/4/element/a.html"><span class="kw2">&lt;a</span></a> <span class="kw3">href</span>=<span class="st0">&quot;about.php&quot;</span><span class="kw2">&gt;</span></a></span>About Us<span class="sc2"><span class="kw2">&lt;/a&gt;</span></span><span class="sc2"><span class="kw2">&lt;/li&gt;</span></span>
    <span class="sc2"><a href="http://december.com/html/4/element/li.html"><span class="kw2">&lt;li&gt;</span></a></span><span class="sc2"><a href="http://december.com/html/4/element/a.html"><span class="kw2">&lt;a</span></a> <span class="kw3">href</span>=<span class="st0">&quot;contact.php&quot;</span><span class="kw2">&gt;</span></a></span>Contact Us<span class="sc2"><span class="kw2">&lt;/a&gt;</span></span><span class="sc2"><span class="kw2">&lt;/li&gt;</span></span>
<span class="sc2"><span class="kw2">&lt;/ul&gt;</span></span></pre>
</div></p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">array_to_menu</span><span class="br0">&#40;</span><span class="re0">$array</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$tor</span> <span class="re2">=</span> <span class="st0">'&lt;ul&gt;'</span>;
    <span class="kw1">foreach</span> <span class="br0">&#40;</span> <span class="re0">$array</span> <span class="kw1">as</span> <span class="re0">$url</span><span class="re2">=&gt;</span><span class="re0">$title</span> <span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="re0">$tor</span> .<span class="re2">=</span> <span class="st0">&quot;<span class="es0">\n</span><span class="es0">\t</span>&lt;li&gt;&lt;a href=<span class="es0">\&quot;</span>$url<span class="es0">\&quot;</span>&gt;$title&lt;/a&gt;&lt;/li&gt;&quot;</span>;
    <span class="br0">&#125;</span>
    <span class="re0">$tor</span> .<span class="re2">=</span> <span class="st0">&quot;<span class="es0">\n</span>&lt;/ul&gt;&quot;</span>;
    <span class="kw1">return</span> <span class="re0">$tor</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>Site Header &#x2605;</h2>

<p>In an external file, say &#8220;global.php&#8221;, make a function <code>my_header($title)</code>
that outputs a standard (x)HTML document header with <code>&lt;title&gt;$title&lt;/title&gt;</code>.</p>

<p>You can then call</p>

<p><div>
<pre class="php"><span class="kw1">include</span><span class="br0">&#40;</span> <span class="st0">'global.php'</span> <span class="br0">&#41;</span>;</pre>
</div></p>

<p>on other pages on your site and then simply call, e.g.,</p>

<p><div>
<pre class="php">my_header<span class="br0">&#40;</span><span class="st0">'Home Page'</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>to output the standard header for the home page.</p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">my_header</span><span class="br0">&#40;</span> <span class="re0">$title</span> <span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="st0">''</span>                                                  ,<span class="st0">&quot;<span class="es0">\n</span>&quot;</span>
    ,<span class="st0">'&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;'</span>                ,<span class="st0">&quot;<span class="es0">\n</span>&quot;</span>
    ,<span class="st0">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0'</span>          ,<span class="st0">&quot;<span class="es0">\n</span>&quot;</span>
    ,<span class="st0">' Strict//EN&quot;'</span>                                          ,<span class="st0">&quot;<span class="es0">\n</span>&quot;</span>
    ,<span class="st0">'&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;'</span>  ,<span class="st0">&quot;<span class="es0">\n</span>&quot;</span>
    ,<span class="st0">'&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;'</span>            ,<span class="st0">&quot;<span class="es0">\n</span>&quot;</span>
    ,<span class="st0">' xml:lang=&quot;en&quot; lang=&quot;en&quot;&gt;'</span>                             ,<span class="st0">&quot;<span class="es0">\n</span>&quot;</span>
    ,<span class="st0">'&lt;head&gt;'</span>                                                ,<span class="st0">&quot;<span class="es0">\n</span>&quot;</span>
    ,<span class="st0">'&lt;title&gt;'</span>,<span class="re0">$title</span>,<span class="st0">'&lt;/title&gt;'</span>                             ,<span class="st0">&quot;<span class="es0">\n</span>&quot;</span>
    ,<span class="st0">'&lt;style type=&quot;text/css&quot;&gt;'</span>                               ,<span class="st0">&quot;<span class="es0">\n</span>&quot;</span>
    ,<span class="st0">'/*&lt;![CDATA[*/'</span>                                         ,<span class="st0">&quot;<span class="es0">\n</span>&quot;</span>
    ,<span class="st0">'@import &quot;styles.css&quot;;'</span>                                 ,<span class="st0">&quot;<span class="es0">\n</span>&quot;</span>
    ,<span class="st0">'/*]]&gt;*/'</span>                                               ,<span class="st0">&quot;<span class="es0">\n</span>&quot;</span>
    ,<span class="st0">'&lt;/style&gt;'</span>                                              ,<span class="st0">&quot;<span class="es0">\n</span>&quot;</span>
    ,<span class="st0">'&lt;script type=&quot;text/javascript&quot;&gt;'</span>                       ,<span class="st0">&quot;<span class="es0">\n</span>&quot;</span>
    ,<span class="st0">'&lt;/script&gt;'</span>                                             ,<span class="st0">&quot;<span class="es0">\n</span>&quot;</span>
    ,<span class="st0">'&lt;/head&gt;'</span>                                               ,<span class="st0">&quot;<span class="es0">\n</span>&quot;</span>
    ,<span class="st0">'&lt;body&gt;'</span>                                                ,<span class="st0">&quot;<span class="es0">\n</span>&quot;</span>
    ;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>Scope:  Global &#x2605;&#x2605;</h2>

<p>Only variables you use inside of a function are visible inside of that
function unless you declare them as &#8220;global.&#8221; So the following code will not
have the intended results:</p>

<p><div>
<pre class="php"><span class="re0">$counter</span> <span class="re2">=</span> <span class="nu0">0</span>;
<span class="kw4">function</span> <span class="re3">count</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$counter</span>++;
    <span class="kw1">return</span> <span class="re0">$counter</span>;
<span class="br0">&#125;</span></pre>
</div></p>

<p>because our <code>count</code> function has no notion of the <code>$counter</code> variable
precisely because we did not say it was global.</p>

<p>In order to specify that a variable <code>$my_variable</code> is a &#8220;global&#8221; variable
within a function, you simply have to put</p>

<p><div>
<pre class="php"><a href="http://www.php.net/global"><span class="kw3">global</span></a> <span class="re0">$my_variable</span>;</pre>
</div></p>

<p>within the function body. You can specify multiple global variables in the
manner of</p>

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">foobar</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <a href="http://www.php.net/global"><span class="kw3">global</span></a> <span class="re0">$foo</span>, <span class="re0">$bar</span>, <span class="re0">$baz</span>;
    <span class="kw1">return</span> <span class="re0">$foo</span>++ + <span class="re0">$bar</span>++ + <span class="re0">$baz</span>++;
<span class="br0">&#125;</span></pre>
</div></p>

<p>With this information, make a function <code>global_counter()</code> that starts by
returning <code>0</code> and then returns one more than it returned last time every time
it is called after the first time. The function should access the global
variable <code>$counter</code> so other functions can perhaps use the value as well.</p>

<div class="showhide" title="">

<p>The most basic solution:</p>

<p><div>
<pre class="php"><span class="re0">$counter</span> <span class="re2">=</span> <span class="nu0">0</span>;   <span class="co1">// assume this is defined somewhere in the script</span>
<span class="kw4">function</span> <span class="re3">global_counter</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <a href="http://www.php.net/global"><span class="kw3">global</span></a> <span class="re0">$counter</span>;
    <span class="re0">$ret</span> <span class="re2">=</span> <span class="re0">$counter</span>;
    <span class="re0">$counter</span>++;
    <span class="kw1">return</span> <span class="re0">$ret</span>;
<span class="br0">&#125;</span></pre>
</div></p>

<p>A slightly more tricky solution:</p>

<p><div>
<pre class="php"><span class="re0">$counter</span> <span class="re2">=</span> <span class="nu0">0</span>;
<span class="kw4">function</span> <span class="re3">global_counter</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <a href="http://www.php.net/global"><span class="kw3">global</span></a> <span class="re0">$counter</span>;
    <span class="kw1">return</span> <span class="re0">$counter</span>++;
<span class="br0">&#125;</span></pre>
</div></p>

<p>(this works because the <code>++</code> operator increments after it is returned when it
is placed after a variable; it increments <em>before</em> it is returned it if is
placed before a variable. This is subtle and mostly not important, however.)</p>

</div>

<h2>Scope:  Static  &#x2605;&#x2605;</h2>

<p>PHP also has the notion of static variables (these have no connection to
static class variables from object-oriented programming). If a variable is
declared as <code>static</code> within a function body, then it persists across the
function&#8217;s execution: its value is maintained for next time even after the
function is executed.</p>

<p>If you assign a value to a static variable at the same time as you declare it
static, then that assignment only happens the first time the function is run.</p>

<p>As an example, the following function always returns one more than it returned
on the previous call and does not rely on any global variables:</p>

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">counter</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <a href="http://www.php.net/static"><span class="kw3">static</span></a> <span class="re0">$i</span> <span class="re2">=</span> <span class="nu0">0</span>; <span class="co1">// this assignment only happens the first time </span>
                   <span class="co1">// this function is run</span>
    <span class="re0">$i</span>++; <span class="co1">// this is always run, even the first time the function is run.</span>
    <span class="kw1">return</span> <span class="re0">$i</span>; <span class="co1">// of course this is always run as well.</span>
<span class="br0">&#125;</span></pre>
</div></p>

<p>With this information make a function <code>even_odd()</code> that first returns <code>true</code>
and then alternates back and forth between returning <code>false</code> and <code>true</code> every
time it&#8217;s called. You may not use global variables.</p>

<div class="showhide" title="">

<p>The simple solution is</p>

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">even_odd</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <a href="http://www.php.net/static"><span class="kw3">static</span></a> <span class="re0">$i</span> <span class="re2">=</span> <span class="kw2">false</span>; <span class="co1">// this is only run the first</span>
                       <span class="co1">// time the funciton is called</span>
    <span class="re0">$i</span> <span class="re2">=</span> !<span class="re0">$i</span>; <span class="co1">// this is kind of like the `$counter++` from above</span>
    <span class="kw1">return</span> <span class="re0">$i</span>;
<span class="br0">&#125;</span></pre>
</div></p>

<p>or another version (which instead keeps a counter and then returns whether
the value is even before incrementing it).</p>

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">even_odd</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <a href="http://www.php.net/static"><span class="kw3">static</span></a> <span class="re0">$i</span> <span class="re2">=</span> <span class="nu0">0</span>;
    <span class="kw1">return</span> <span class="re0">$i</span>++ % <span class="nu0">2</span> <span class="re2">==</span> <span class="nu0">0</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>Scope:  Static 2  &#x2605;&#x2605;</h2>

<p>Rework your <code>global_counter</code> function into <code>counter($reset)</code> that takes a
single argument: whether or not to reset the counter (the default to this
argument should be <code>false</code>). Your function should return 0 when it&#8217;s first run
and when it&#8217;s reset but should otherwise return 1 more than it did the last
time it was run. You may not rely on any global variables.</p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">counter</span><span class="br0">&#40;</span><span class="re0">$reset</span><span class="re2">=</span>false<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <a href="http://www.php.net/static"><span class="kw3">static</span></a> <span class="re0">$i</span> <span class="re2">=</span> <span class="nu0">0</span>;
    <span class="re0">$i</span> +<span class="re2">=</span> <span class="re0">$reset</span> ? -<span class="re0">$i</span> : <span class="nu0">0</span>;
    <span class="kw1">return</span> <span class="re0">$i</span>++;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>XML Tag  &#x2605;&#x2605;&#x2605;</h2>

<p>Create a function <code>xml($tag,$data,$attributes)</code> that returns the <code>$tag</code> XML
tag surrounding <code>$data</code> with the called <code>$attributes</code>, an associative array
mapping attribute names to their values. Remember that XML is very similar to
HTML (in fact, modern versions of HTML, called xHTML, actually <em>are</em> XML).
Your function should default to having no attributes (i.e., have the default
parameter be <code>null</code>).</p>

<p>So calling</p>

<p><div>
<pre class="php">xml<span class="br0">&#40;</span><span class="st0">'name'</span>,<span class="st0">'John Denver'</span>,<a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'type'</span><span class="re2">=&gt;</span><span class="st0">'first'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>should return</p>

<p><div>
<pre class="xml"><span class="sc3"><span class="re1">&lt;name</span> <span class="re0">type</span>=<span class="st0">&quot;first&quot;</span><span class="re2">&gt;</span></span>John Denver<span class="sc3"><span class="re1">&lt;/name<span class="re2">&gt;</span></span></span></pre>
</div></p>

<p>Similarly, calling</p>

<p><div>
<pre class="php">xml<span class="br0">&#40;</span><span class="st0">'p'</span>,
    <span class="st0">'It was the best of times'</span>,
    <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span> <span class="st0">'class'</span>  <span class="re2">=&gt;</span> <span class="st0">'poem'</span>,
           <span class="st0">'id'</span>     <span class="re2">=&gt;</span> <span class="st0">'taleof2cities'</span> <span class="br0">&#41;</span>
    <span class="br0">&#41;</span>;</pre>
</div></p>

<p>should return</p>

<p><div>
<pre class="xml"><span class="sc3"><span class="re1">&lt;p</span> <span class="re0">class</span>=<span class="st0">&quot;poem&quot;</span> <span class="re0">id</span>=<span class="st0">&quot;taleof2cities&quot;</span><span class="re2">&gt;</span></span>It was the best of times<span class="sc3"><span class="re1">&lt;/p<span class="re2">&gt;</span></span></span></pre>
</div></p>

<p>And calling</p>

<p><div>
<pre class="php">xml<span class="br0">&#40;</span><span class="st0">'artist'</span>,<span class="st0">'Johnny Cash'</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>should return</p>

<p><div>
<pre class="xml"><span class="sc3"><span class="re1">&lt;artist<span class="re2">&gt;</span></span></span>Johnny Cash<span class="sc3"><span class="re1">&lt;/artist<span class="re2">&gt;</span></span></span></pre>
</div></p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">xml</span><span class="br0">&#40;</span><span class="re0">$tag</span>,<span class="re0">$data</span>,<span class="re0">$atts</span><span class="re2">=</span>null<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="co1">// important that this be declared outside the `if` statement for</span>
    <span class="co1">// proper scope:</span>
    <span class="re0">$attributes</span> <span class="re2">=</span> <span class="st0">''</span>;
    <span class="co1">// assemble attributes string only if $atts != null:</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span> <span class="re0">$atts</span> <span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="re0">$strs</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
        <span class="kw1">foreach</span> <span class="br0">&#40;</span> <span class="re0">$atts</span> <span class="kw1">as</span> <span class="re0">$attr</span><span class="re2">=&gt;</span><span class="re0">$val</span> <span class="br0">&#41;</span>
            <span class="re0">$strs</span><span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="re2">=</span> <span class="st0">&quot;$attr=<span class="es0">\&quot;</span>$val<span class="es0">\&quot;</span>&quot;</span>;
        <span class="re0">$strs</span>       <span class="re2">=</span> <a href="http://www.php.net/implode"><span class="kw3">implode</span></a><span class="br0">&#40;</span><span class="st0">' '</span>,<span class="re0">$strs</span><span class="br0">&#41;</span>;
        <span class="co1">// prepend a space:</span>
        <span class="re0">$attributes</span> <span class="re2">=</span> <span class="st0">&quot; $strs&quot;</span>;
    <span class="br0">&#125;</span>
    <span class="co1">// we prepended a space earlier so we could simply call</span>
    <span class="co1">//</span>
    <span class="co1">//     $tag{$attributes}</span>
    <span class="co1">//</span>
    <span class="co1">// which is simpler than</span>
    <span class="co1">//</span>
    <span class="co1">//     $atts ? &quot;$tag $attributes&quot; : &quot;$tag&quot;</span>
    <span class="co1">//</span>
    <span class="co1">// inside the &lt;&gt;</span>
    <span class="kw1">return</span> <span class="st0">&quot;&lt;$tag{$attributes}&gt;$data&lt;/$tag&gt;&quot;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>Array to XML &#x2605;&#x2605;</h2>

<p>Modern web sites, dubbed <em>web applications</em>, use a combination of server-side
and client-side programming to deliver content to the user without the him/her
having to reload the page. For example, on the Gmail web site, you can &#8220;star&#8221;
a message without making the browser get a new page. This technology is still
rapidly evolving and goes by the name <strong>AJAX</strong>, or <em>Asynchronous Javascript
and XML</em>. The name implies that XML, <em>eXtensible Markup Language</em> is used.
While it is definitely not required that the AJAX use XML, many web developers
prefer the XML format because of its wide adoption.</p>

<p>What you are to do is create a function, <code>array_to_xml($arr,$collection)</code>,
that takes an associative array as its first argument and a string as its
second argument.</p>

<p>The first argument, <code>$arr</code>, is the data being passed. It might be something
like</p>

<p><div>
<pre class="php"><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>  <span class="st0">'name'</span>  <span class="re2">=&gt;</span> <span class="st0">'Sir Elton John'</span>,
        <span class="st0">'email'</span> <span class="re2">=&gt;</span> <span class="st0">'theslayerofdragons@gmail.com'</span>,
        <span class="st0">'title'</span> <span class="re2">=&gt;</span> <span class="st0">'Singer/Songwriter'</span>
<span class="br0">&#41;</span>;</pre>
</div></p>

<p>The second argument, <code>$collection</code> is simply the name of the &#8220;wrapper&#8221; XML tag
for all the other tags.</p>

<p>Your function doesn&#8217;t need to handle the case where a value from <code>$arr</code> is
itself an array (e.g., where <code>'Sir Elton John'</code> is an array of names,
perhaps).</p>

<p>So calling</p>

<p><div>
<pre class="php">array_to_xml<span class="br0">&#40;</span><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span> <span class="st0">'name'</span>  <span class="re2">=&gt;</span> <span class="st0">'Sir Elton John'</span>,
                    <span class="st0">'email'</span> <span class="re2">=&gt;</span> <span class="st0">'theslayerofdragons@gmail.com'</span>,
                    <span class="st0">'title'</span> <span class="re2">=&gt;</span> <span class="st0">'Singer/Songwriter'</span><span class="br0">&#41;</span>,
            <span class="st0">'data'</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>should return</p>

<p><div>
<pre class="xml"><span class="sc3"><span class="re1">&lt;data<span class="re2">&gt;</span></span></span>
    <span class="sc3"><span class="re1">&lt;name<span class="re2">&gt;</span></span></span>Sir Elton John<span class="sc3"><span class="re1">&lt;/name<span class="re2">&gt;</span></span></span>
    <span class="sc3"><span class="re1">&lt;email<span class="re2">&gt;</span></span></span>theslayerofdragons@gmail.com<span class="sc3"><span class="re1">&lt;/email<span class="re2">&gt;</span></span></span>
    <span class="sc3"><span class="re1">&lt;title<span class="re2">&gt;</span></span></span>Singer/Songwriter<span class="sc3"><span class="re1">&lt;/title<span class="re2">&gt;</span></span></span>
<span class="sc3"><span class="re1">&lt;/data<span class="re2">&gt;</span></span></span></pre>
</div></p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">array_to_xml</span><span class="br0">&#40;</span><span class="re0">$a</span>,<span class="re0">$collection</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$acc</span> <span class="re2">=</span> <span class="st0">&quot;&lt;$collection&gt;&quot;</span>;
    <span class="kw1">foreach</span> <span class="br0">&#40;</span> <span class="re0">$a</span> <span class="kw1">as</span> <span class="re0">$tag</span><span class="re2">=&gt;</span><span class="re0">$data</span> <span class="br0">&#41;</span>
        <span class="re0">$acc</span> .<span class="re2">=</span> <span class="st0">&quot;<span class="es0">\n</span><span class="es0">\t</span>&quot;</span>.xml<span class="br0">&#40;</span><span class="re0">$tag</span>,<span class="re0">$data</span><span class="br0">&#41;</span>;
    <span class="kw1">return</span> <span class="st0">&quot;$acc<span class="es0">\n</span>&lt;/$collection&gt;&quot;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>JSON Field &#x2605;</h2>

<p>More on AJAX&#8230;</p>

<p>If XML just isn&#8217;t your thing, then you have other ways of getting data from
the server to the page. Another popular syntax is <strong>JSON</strong>, or <em>Javascript
Object Notation</em>. It is, as its name implies, inspired by how objects are
defined in Javascript. (Refer to the <a href="javascript_problems.html">Javascript Problems</a> page for
Javascript sample problems.)</p>

<p>Here is an example bit of JSON:</p>

<p><div>
<pre class="javascript"><span class="br0">&#123;</span>
    <span class="kw3">name</span>:   <span class="st0">'Sir Elton John'</span>,
    email:  <span class="st0">'dragonslayer@gmail.com'</span>,
    title:  <span class="st0">'singer/songwrier'</span>
<span class="br0">&#125;</span></pre>
</div></p>

<p>Notice that JSON uses colons to separate a key from its value (whereas PHP
uses the <code>=&gt;</code> &#8220;arrow&#8221;). Some other important things to note:</p>

<ol>
<li><p>The keys (<code>name</code>,<code>email</code>, and <code>title</code> in this example) are <em>always</em>
considered strings, so there&#8217;s no need to surround them with quotes (and
it&#8217;s bad syntax if you do).</p></li>
<li><p>Keys may contain letters, numbers, and underscores but no spaces or
special characters.</p></li>
<li><p>Commas separate the key/value pairs, but spacing is arbitrary.</p></li>
<li><p>Values may be of any type (strings, integers, or any JavaScript data type,
including arrays and hashes).</p></li>
<li><p>Values may contain quotes, so if you wish a value to include a quote, it
must be escaped.</p>

<p>You can use the built-in <code>addslashes($str)</code> function that takes a string
as a parameter and returns the escaped version of that string.</p>

<p>So calling</p>

<p><div>
<pre class="php"><a href="http://www.php.net/addslashes"><span class="kw3">addslashes</span></a><span class="br0">&#40;</span><span class="st0">&quot;I didn't say anything&quot;</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>returns the string</p>

<p><div>
<pre>I didn\'t say anything!</pre>
</div></p></li>
</ol>

<p>Your assignment is to create a function <code>json($key,$value)</code> that returns the
JSON to be put inside a JSON object for the key/value pair.</p>

<p>So calling</p>

<p><div>
<pre class="php">json<span class="br0">&#40;</span><span class="st0">'name'</span>,<span class="st0">'Sir Elton John'</span><span class="br0">&#41;</span></pre>
</div></p>

<p>returns the string</p>

<p><div>
<pre>name:   'Sir Elton John'</pre>
</div></p>

<p>and calling</p>

<p><div>
<pre class="php">json<span class="br0">&#40;</span><span class="st0">'he_said'</span>,<span class="st0">&quot;That's just not right!&quot;</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>returns the string</p>

<p><div>
<pre>he_said:    'That\'s just not right!'</pre>
</div></p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">json</span><span class="br0">&#40;</span><span class="re0">$k</span>,<span class="re0">$v</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="kw1">return</span> <span class="st0">&quot;$k: '&quot;</span>.<a href="http://www.php.net/addslashes"><span class="kw3">addslashes</span></a><span class="br0">&#40;</span><span class="re0">$v</span><span class="br0">&#41;</span>.<span class="st0">'<span class="es0">\'</span>'</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>Array to JSON &#x2605;&#x2605;&#x2605;</h2>

<p>(The discussion from the above problem, &#8220;JSON Field,&#8221; is relevant.)</p>

<p>Your assignment is to create a PHP function <code>array_to_json($data)</code> that takes
an associative array and returns the JSON to transmit that data.</p>

<p>So calling</p>

<p><div>
<pre class="php">array_to_json<span class="br0">&#40;</span><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st0">'name'</span>  <span class="re2">=&gt;</span> <span class="st0">'Sir Elton John'</span>,
    <span class="st0">'email'</span> <span class="re2">=&gt;</span> <span class="st0">'dragonslayer@gmail.com'</span>,
    <span class="st0">'title'</span> <span class="re2">=&gt;</span> <span class="st0">'singer/songwrier'</span>
    <span class="br0">&#41;</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>returns the string</p>

<p><div>
<pre class="javascript"><span class="br0">&#123;</span>
    <span class="kw3">name</span>:   <span class="st0">'Sir Elton John'</span>,
    email:  <span class="st0">'dragonslayer@gmail.com'</span>,
    title:  <span class="st0">'singer/songwrier'</span>
<span class="br0">&#125;</span></pre>
</div></p>

<p>Note:  You might make use of the earlier <code>fencepost</code> function.</p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">array_to_json</span><span class="br0">&#40;</span><span class="re0">$arr</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$fds</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="kw1">foreach</span> <span class="br0">&#40;</span> <span class="re0">$arr</span> <span class="kw1">as</span> <span class="re0">$key</span><span class="re2">=&gt;</span><span class="re0">$value</span> <span class="br0">&#41;</span>
        <span class="re0">$fds</span><span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="re2">=</span> json<span class="br0">&#40;</span><span class="re0">$key</span>,<span class="re0">$value</span><span class="br0">&#41;</span>;
    <span class="kw1">return</span>   fencepost<span class="br0">&#40;</span> <span class="re0">$fds</span>, <span class="st0">'{ '</span>, <span class="st0">' }'</span>, <span class="st0">', '</span> <span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>HTML Table &#x2605;&#x2605;&#x2605;</h2>

<p>Create a function <code>html_table($arrays)</code> that takes an array of associative
arrays and that returns an HTML table representing that array.</p>

<p>An example array of arrays would be</p>

<p><div>
<pre class="php"><span class="re0">$posts</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
        <span class="st0">'id'</span>        <span class="re2">=&gt;</span> <span class="nu0">0</span>,
        <span class="st0">'title'</span>     <span class="re2">=&gt;</span> <span class="st0">'My First Entry'</span>,
        <span class="st0">'created'</span>   <span class="re2">=&gt;</span> <span class="nu0">1195073683</span>,
        <span class="st0">'date'</span>      <span class="re2">=&gt;</span> <span class="st0">'2007-11-13'</span>,
        <span class="st0">'author_id'</span> <span class="re2">=&gt;</span> <span class="nu0">1</span>,
        <span class="st0">'text'</span>      <span class="re2">=&gt;</span> <span class="st0">'My 1st Post'</span>
    <span class="br0">&#41;</span>,
    <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
        <span class="st0">'id'</span>        <span class="re2">=&gt;</span> <span class="nu0">1</span>,
        <span class="st0">'title'</span>     <span class="re2">=&gt;</span> <span class="st0">'My Second Entry'</span>
        <span class="st0">'created'</span>   <span class="re2">=&gt;</span> <span class="nu0">1195073623</span>,
        <span class="st0">'date'</span>      <span class="re2">=&gt;</span> <span class="st0">'2007-11-14'</span>,
        <span class="st0">'author_id'</span> <span class="re2">=&gt;</span> <span class="nu0">2</span>,
        <span class="st0">'text'</span>      <span class="re2">=&gt;</span> <span class="st0">'My 2nd Post'</span>
    <span class="br0">&#41;</span>,
<span class="br0">&#41;</span>;</pre>
</div></p>

<p>And your output from <code>html_table($posts)</code> is supposed to mimic this
table:</p>

<p><div>
<pre>+----+-----------------+-------------+------------+
| id | title           |     created |       date |
+----+-----------------+-------------+------------+
|  0 | My First Entry  | 11195073683 | 2007-11-13 |
|  1 | My Second Entry |  1195073623 | 2007-11-14 |
+----+-----------------+-------------+------------+
            --&gt;      +-----------+----------------+
                     | author_id | text           |
                     +-----------+----------------+
                     |         1 | My 1st Post    |
                     |         2 | My 2nd Post    |
                     +-----------+----------------+</pre>
</div></p>

<p>So the HTML code you would need to produce is something like&#8230;</p>

<div class="showhide" title="HTML Table Code">

<p><div>
<pre class="html"><span class="sc2"><a href="http://december.com/html/4/element/table.html"><span class="kw2">&lt;table&gt;</span></a></span>
&nbsp;
<span class="sc2"><a href="http://december.com/html/4/element/thead.html"><span class="kw2">&lt;thead&gt;</span></a></span><span class="sc2"><a href="http://december.com/html/4/element/tr.html"><span class="kw2">&lt;tr&gt;</span></a></span>
  <span class="sc2"><a href="http://december.com/html/4/element/th.html"><span class="kw2">&lt;th&gt;</span></a></span>id<span class="sc2"><span class="kw2">&lt;/th&gt;</span></span>           <span class="sc2"><a href="http://december.com/html/4/element/th.html"><span class="kw2">&lt;th&gt;</span></a></span>title<span class="sc2"><span class="kw2">&lt;/th&gt;</span></span>              <span class="sc2"><a href="http://december.com/html/4/element/th.html"><span class="kw2">&lt;th&gt;</span></a></span>created<span class="sc2"><span class="kw2">&lt;/th&gt;</span></span>
  <span class="sc2"><a href="http://december.com/html/4/element/th.html"><span class="kw2">&lt;th&gt;</span></a></span>date<span class="sc2"><span class="kw2">&lt;/th&gt;</span></span>         <span class="sc2"><a href="http://december.com/html/4/element/th.html"><span class="kw2">&lt;th&gt;</span></a></span>author_id<span class="sc2"><span class="kw2">&lt;/th&gt;</span></span>          <span class="sc2"><a href="http://december.com/html/4/element/th.html"><span class="kw2">&lt;th&gt;</span></a></span>text<span class="sc2"><span class="kw2">&lt;/th&gt;</span></span>
<span class="sc2"><span class="kw2">&lt;/tr&gt;</span></span><span class="sc2"><span class="kw2">&lt;</span></a>/thead&gt;</span>
&nbsp;
<span class="sc2"><a href="http://december.com/html/4/element/tbody.html"><span class="kw2">&lt;tbody&gt;</span></a></span><span class="sc2"><a href="http://december.com/html/4/element/tr.html"><span class="kw2">&lt;tr&gt;</span></a></span>
  <span class="sc2"><a href="http://december.com/html/4/element/td.html"><span class="kw2">&lt;td&gt;</span></a></span>0<span class="sc2"><span class="kw2">&lt;/td&gt;</span></span>            <span class="sc2"><a href="http://december.com/html/4/element/td.html"><span class="kw2">&lt;td&gt;</span></a></span>My First Entry<span class="sc2"><span class="kw2">&lt;/td&gt;</span></span>     <span class="sc2"><a href="http://december.com/html/4/element/td.html"><span class="kw2">&lt;td&gt;</span></a></span>11195073683<span class="sc2"><span class="kw2">&lt;/td&gt;</span></span>
  <span class="sc2"><a href="http://december.com/html/4/element/td.html"><span class="kw2">&lt;td&gt;</span></a></span>2007-11-13<span class="sc2"><span class="kw2">&lt;/td&gt;</span></span>   <span class="sc2"><a href="http://december.com/html/4/element/td.html"><span class="kw2">&lt;td&gt;</span></a></span>1<span class="sc2"><span class="kw2">&lt;/td&gt;</span></span>                  <span class="sc2"><a href="http://december.com/html/4/element/td.html"><span class="kw2">&lt;td&gt;</span></a></span>My 1st Post<span class="sc2"><span class="kw2">&lt;/td&gt;</span></span>
<span class="sc2"><span class="kw2">&lt;/tr&gt;</span></span><span class="sc2"><a href="http://december.com/html/4/element/tr.html"><span class="kw2">&lt;tr&gt;</span></a></span>                                           
  <span class="sc2"><a href="http://december.com/html/4/element/td.html"><span class="kw2">&lt;td&gt;</span></a></span>1<span class="sc2"><span class="kw2">&lt;/td&gt;</span></span>            <span class="sc2"><a href="http://december.com/html/4/element/td.html"><span class="kw2">&lt;td&gt;</span></a></span>My Second Entry<span class="sc2"><span class="kw2">&lt;/td&gt;</span></span>    <span class="sc2"><a href="http://december.com/html/4/element/td.html"><span class="kw2">&lt;td&gt;</span></a></span>1195073623<span class="sc2"><span class="kw2">&lt;/td&gt;</span></span>
  <span class="sc2"><a href="http://december.com/html/4/element/td.html"><span class="kw2">&lt;td&gt;</span></a></span>2007-11-14<span class="sc2"><span class="kw2">&lt;/td&gt;</span></span>   <span class="sc2"><a href="http://december.com/html/4/element/td.html"><span class="kw2">&lt;td&gt;</span></a></span>2<span class="sc2"><span class="kw2">&lt;/td&gt;</span></span>                  <span class="sc2"><a href="http://december.com/html/4/element/td.html"><span class="kw2">&lt;td&gt;</span></a></span>My 2nd Post<span class="sc2"><span class="kw2">&lt;/td&gt;</span></span>
<span class="sc2"><span class="kw2">&lt;/tr&gt;</span></span><span class="sc2"><span class="kw2">&lt;/tbody&gt;</span></span>
&nbsp;
<span class="sc2"><span class="kw2">&lt;/table&gt;</span></span></pre>
</div></p>

<p>(Don&#8217;t worry about spacing our your HTML like this&#8212;that&#8217;s beyond the scope of
this problem.)</p>

</div>

<div class="showhide" title="Solution">

<p>Here is a simple solution:</p>

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">html_table</span><span class="br0">&#40;</span><span class="re0">$data</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$keys</span> <span class="re2">=</span> <a href="http://www.php.net/array_keys"><span class="kw3">array_keys</span></a><span class="br0">&#40;</span><span class="re0">$data</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;
    <span class="co1">// could have used the `my_array_keys`, created above!</span>
    <span class="re0">$acc</span>  <span class="re2">=</span> <span class="st0">&quot;&lt;table&gt;<span class="es0">\n</span>&lt;thead&gt;<span class="es0">\n</span>&lt;tr&gt;&quot;</span>;
    <span class="kw1">foreach</span> <span class="br0">&#40;</span> <span class="re0">$keys</span> <span class="kw1">as</span> <span class="re0">$key</span> <span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="re0">$acc</span> .<span class="re2">=</span> <span class="st0">&quot;<span class="es0">\n</span><span class="es0">\t</span>&lt;th&gt;$key&lt;/th&gt;&quot;</span>;
    <span class="br0">&#125;</span>
    <span class="re0">$acc</span> .<span class="re2">=</span> <span class="st0">&quot;<span class="es0">\n</span>&lt;/tr&gt;<span class="es0">\n</span>&lt;/thead&gt;<span class="es0">\n</span>&lt;tbody&gt;&quot;</span>;
    <span class="kw1">foreach</span> <span class="br0">&#40;</span> <span class="re0">$data</span> <span class="kw1">as</span> <span class="re0">$d</span> <span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="re0">$acc</span> .<span class="re2">=</span> <span class="st0">&quot;<span class="es0">\n</span><span class="es0">\t</span>&lt;tr&gt;&quot;</span>;
        <span class="kw1">foreach</span><span class="br0">&#40;</span> <span class="re0">$keys</span> <span class="kw1">as</span> <span class="re0">$key</span> <span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            <span class="re0">$dval</span> <span class="re2">=</span> <span class="re0">$d</span><span class="br0">&#91;</span><span class="re0">$key</span><span class="br0">&#93;</span>;
            <span class="re0">$acc</span> .<span class="re2">=</span> <span class="st0">&quot;<span class="es0">\n</span><span class="es0">\t</span><span class="es0">\t</span>&lt;td&gt;$dval&lt;/td&gt;&quot;</span>;
        <span class="br0">&#125;</span>
        <span class="re0">$acc</span> .<span class="re2">=</span> <span class="st0">&quot;<span class="es0">\n</span><span class="es0">\t</span>&lt;/tr&gt;&quot;</span>;
    <span class="br0">&#125;</span>
    <span class="re0">$acc</span> .<span class="re2">=</span> <span class="st0">&quot;<span class="es0">\n</span>&lt;/tbody&gt;<span class="es0">\n</span>&lt;/table&gt;&quot;</span>;
    <span class="kw1">return</span> <span class="re0">$acc</span>;
<span class="br0">&#125;</span></pre>
</div></p>

<p>And here is a more complex but &#8220;refactored&#8221; solution:</p>

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">html_table</span><span class="br0">&#40;</span><span class="re0">$users</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$a</span>  <span class="re2">=</span> fencepost<span class="br0">&#40;</span> <a href="http://www.php.net/array_keys"><span class="kw3">array_keys</span></a><span class="br0">&#40;</span><span class="re0">$users</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="br0">&#41;</span>,
                     <span class="st0">'&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;'</span>,
                     <span class="st0">'&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;'</span>,
                     <span class="st0">'&lt;/th&gt;&lt;th&gt;'</span><span class="br0">&#41;</span>;
    <span class="kw1">foreach</span> <span class="br0">&#40;</span> <span class="re0">$users</span> <span class="kw1">as</span> <span class="re0">$user</span> <span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="re0">$a</span> .<span class="re2">=</span> fencepost<span class="br0">&#40;</span> <a href="http://www.php.net/array_values"><span class="kw3">array_values</span></a><span class="br0">&#40;</span><span class="re0">$user</span><span class="br0">&#41;</span>,
                        <span class="st0">'&lt;tr&gt;&lt;td&gt;'</span>,
                        <span class="st0">'&lt;/td&gt;&lt;/tr&gt;'</span>,
                        <span class="st0">'&lt;/td&gt;&lt;td&gt;'</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <span class="kw1">return</span> <span class="re0">$a</span>.<span class="st0">'&lt;/tbody&gt;&lt;/table&gt;'</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>CSV Data &#x2605;&#x2605;&#x2605;</h2>

<p>(This one&#8217;s not as tough as it initially appears but does introduce a lot of
new concepts.)</p>

<p>Parsing data is one of the primary uses for PHP and other scripting languages:
we want to mash some existing data from a file or a database or the user into
a new format so it has a different use.</p>

<p><strong>CSV</strong> stands for Comma-Separated Value and is a common format that a lot of
programs export to. It has a very simple format: the first line typically has
a list of the fields and the subsequent lines have all of those fields. Commas
(<code>,</code>) are used to separate values, and all values are surrounded in double
quotes. If a value is not given for a field, then it is indicated by empty
quotes.</p>

<p>Here is a very simple sample CSV file</p>

<p><div>
<pre>&quot;Title&quot;,&quot;Email&quot;,&quot;Job&quot;
&quot;Sir Elton John&quot;,&quot;&quot;,&quot;Singer/Composer&quot;
&quot;The Slayer of Dragons&quot;,&quot;dragonslayer@hotmail.com&quot;,&quot;Barista&quot;</pre>
</div></p>

<p>Your job is to create a function <code>csv_to_array($filename)</code> that takes a file
name as a parameter and returns an array of associative arrays for the CSV
data in that file.</p>

<p>You may assume that the only commas in the file are between the fields (which
isn&#8217;t guaranteed you by most programs that export to CSV).</p>

<p>If I had the above contents in a file called <em>data.csv</em>, I should be able to
call</p>

<p><div>
<pre class="php"><span class="re0">$data</span> <span class="re2">=</span> csv_to_array<span class="br0">&#40;</span><span class="re0">$filename</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>and then have that</p>

<p><div>
<pre class="php"><span class="re0">$data</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
        <span class="st0">'Title'</span> <span class="re2">=&gt;</span> <span class="st0">'Sir Elton John'</span>,
        <span class="st0">'Email'</span> <span class="re2">=&gt;</span> <span class="st0">''</span>,
        <span class="st0">'Job'</span>   <span class="re2">=&gt;</span> <span class="st0">'Singer/Composer'</span>
    <span class="br0">&#41;</span>,
    <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
        <span class="st0">'Title'</span> <span class="re2">=&gt;</span> <span class="st0">'The Slayer of Dragons'</span>,
        <span class="st0">'Email'</span> <span class="re2">=&gt;</span> <span class="st0">'dragonslayer@hotmail.com'</span>,
        <span class="st0">'Job'</span>   <span class="re2">=&gt;</span> <span class="st0">'Barista'</span>
    <span class="br0">&#41;</span>
<span class="br0">&#41;</span>;</pre>
</div></p>

<h3>Hints:</h3>

<p>PHP has a built-in function <code>file_get_contents($file)</code> that takes a file name
as an argument and returns the contents of that file as a string (the file
must be in the same directory as the PHP script).</p>

<p>(There is also a function <code>file</code> that returns the file&#8217;s contents back
directly as an array of lines, but this requires dealing with newline
characters which can be a pain, and using <code>get_file_contents</code> is not much
extra work for us or the computer.)</p>

<p>You might find your functions <code>my_array_keys</code> and <code>vjoin</code> handy. Also don&#8217;t
forget to <a href="http://us3.php.net/explode">read up on the <code>explode</code> function</a>.</p>

<p>Feel free to make a helper function.</p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="coMULTI">/* A line looks like
&nbsp;
       &quot;Export Item&quot;,&quot;Date&quot;,&quot;Start&quot;,&quot;End&quot;,&quot;Duration&quot;,&quot;Title&quot;,&quot;Importance&quot;,&quot;Access&quot;
&nbsp;
   And we want to explode on `&quot;,&quot;`, so we'll remove the leading and
   trailing quotes and explode on that value.
 */</span>
<span class="kw4">function</span> <span class="re3">split_on_quote_comma</span><span class="br0">&#40;</span><span class="re0">$line</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$line</span> <span class="re2">=</span> <a href="http://www.php.net/substr"><span class="kw3">substr</span></a><span class="br0">&#40;</span><span class="re0">$line</span>,<span class="nu0">1</span>,<a href="http://www.php.net/strlen"><span class="kw3">strlen</span></a><span class="br0">&#40;</span><span class="re0">$line</span><span class="br0">&#41;</span><span class="nu0">-2</span><span class="br0">&#41;</span>;
    <span class="kw1">return</span> <a href="http://www.php.net/explode"><span class="kw3">explode</span></a><span class="br0">&#40;</span><span class="st0">'&quot;,&quot;'</span>,<span class="re0">$line</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span>
&nbsp;
<span class="kw4">function</span> <span class="re3">csv_to_array</span><span class="br0">&#40;</span><span class="re0">$filename</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$data</span>   <span class="re2">=</span> <a href="http://www.php.net/file_get_contents"><span class="kw3">file_get_contents</span></a><span class="br0">&#40;</span><span class="re0">$filename</span><span class="br0">&#41;</span>;
    <span class="co1">// `trim`, below, gets rid of any leading/trailing whitespace</span>
    <span class="re0">$lines</span>  <span class="re2">=</span> <a href="http://www.php.net/explode"><span class="kw3">explode</span></a><span class="br0">&#40;</span><span class="st0">&quot;<span class="es0">\n</span>&quot;</span>,<a href="http://www.php.net/trim"><span class="kw3">trim</span></a><span class="br0">&#40;</span><span class="re0">$data</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
    <span class="re0">$keys</span>   <span class="re2">=</span> split_on_quote_comma<span class="br0">&#40;</span><span class="re0">$lines</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;
    <span class="re0">$out</span>    <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="re0">$c</span> <span class="re2">=</span> <a href="http://www.php.net/count"><span class="kw3">count</span></a><span class="br0">&#40;</span><span class="re0">$lines</span><span class="br0">&#41;</span>; <span class="co1">// count here instead of at every loop iteration</span>
    <span class="kw1">for</span><span class="br0">&#40;</span> <span class="re0">$i</span><span class="re2">=</span><span class="nu0">1</span>; <span class="re0">$i</span> <span class="re2">&lt;</span> <span class="re0">$c</span>; <span class="re0">$i</span>++ <span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="re0">$line_data</span> <span class="re2">=</span> split_on_quote_comma<span class="br0">&#40;</span><span class="re0">$lines</span><span class="br0">&#91;</span><span class="re0">$i</span><span class="br0">&#93;</span><span class="br0">&#41;</span>
        <span class="re0">$out</span><span class="br0">&#91;</span><span class="br0">&#93;</span>     <span class="re2">=</span> vjoin<span class="br0">&#40;</span><span class="re0">$keys</span>,<span class="re0">$line_data</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <span class="kw1">return</span> <span class="re0">$out</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>Quote Columns &#x2605;&#x2605;</h2>

<p>SQL, the language of databases, uses back-quotes (<code>`</code>) to surround <strong>table
and column names</strong> and single- or double-quotes to surround <strong>values</strong> in its
statements. (Most people don&#8217;t actually use the back-quotes, but they&#8217;re
considered good form).</p>

<p>Here is an example of an SQL statement that inserts two values into a table
<code>people</code>:</p>

<p><div>
<pre class="sql"><span class="kw1">INSERT</span> <span class="kw1">INTO</span> <span class="st0">`people`</span> <span class="br0">&#40;</span><span class="st0">`title`</span>,<span class="st0">`email`</span>,<span class="st0">`job`</span><span class="br0">&#41;</span>
    <span class="kw1">VALUES</span>
        <span class="br0">&#40;</span><span class="st0">'Sir Elton John'</span>,<span class="st0">''</span>,<span class="st0">'Singer/Composer'</span><span class="br0">&#41;</span>,
        <span class="br0">&#40;</span><span class="st0">'The Slayer of Dragons'</span>,<span class="st0">'dragonslayer@hotmail.com'</span>,<span class="st0">'Barista'</span><span class="br0">&#41;</span>
;</pre>
</div></p>

<p>(Spacing is arbitrary and statements are terminated by semicolons.)</p>

<p>Make a function <code>quote_columns($cols)</code> that takes an array of associative
arrays such as</p>

<p><div>
<pre class="php"><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
        <span class="st0">'title'</span> <span class="re2">=&gt;</span> <span class="st0">'Sir Elton John'</span>,
        <span class="st0">'email'</span> <span class="re2">=&gt;</span> <span class="st0">''</span>,
        <span class="st0">'job'</span>   <span class="re2">=&gt;</span> <span class="st0">'Singer/Composer'</span>
    <span class="br0">&#41;</span>,
    <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
        <span class="st0">'title'</span> <span class="re2">=&gt;</span> <span class="st0">'The Slayer of Dragons'</span>,
        <span class="st0">'email'</span> <span class="re2">=&gt;</span> <span class="st0">'dragonslayer@hotmail.com'</span>,
        <span class="st0">'job'</span>   <span class="re2">=&gt;</span> <span class="st0">'Barista'</span>
    <span class="br0">&#41;</span>
<span class="br0">&#41;</span>;</pre>
</div></p>

<p>and returns a back-ticked, comma-separated, list of the &#8220;columns&#8221; in <code>$cols</code>.
These &#8220;columns&#8221; are really just the keys from any of the &#8220;sub&#8221; arrays in
<code>$cols</code>.</p>

<p>So calling <code>quote_columns</code> on the above should return the string</p>

<p><div>
<pre>`title`,`email`,`job`</pre>
</div></p>

<p>(Note that you can use your <code>fencepost</code> function.)</p>

<div class="showhide" title="">

<p>Here is the solution with <code>fencepost</code>:</p>

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">quote_columns</span><span class="br0">&#40;</span><span class="re0">$cols</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="kw1">return</span> fencepost<span class="br0">&#40;</span> <span class="re0">$cols</span>, <span class="st0">'`'</span>, <span class="st0">'`'</span>, <span class="st0">'`,`'</span> <span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

<p>and here is a solution without using <code>fencepost</code>:</p>

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">quote_columns</span><span class="br0">&#40;</span><span class="re0">$cols</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$titles</span> <span class="re2">=</span> <a href="http://www.php.net/array_keys"><span class="kw3">array_keys</span></a><span class="br0">&#40;</span><span class="re0">$cols</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;
    <span class="kw1">return</span> <span class="st0">'`'</span>.<a href="http://www.php.net/implode"><span class="kw3">implode</span></a><span class="br0">&#40;</span><span class="st0">'`,`'</span>,<span class="re0">$titles</span><span class="br0">&#41;</span>.<span class="st0">'`'</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>Quote Value &#x2605;</h2>

<p>Similar to <code>quote_columns</code> above, write a function <code>quote_value($arr)</code> that
takes a an associative array such as</p>

<p><div>
<pre class="php"><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st0">'title'</span> <span class="re2">=&gt;</span> <span class="st0">'Sir Elton John'</span>,
    <span class="st0">'email'</span> <span class="re2">=&gt;</span> <span class="st0">''</span>,
    <span class="st0">'job'</span>   <span class="re2">=&gt;</span> <span class="st0">'Singer/Composer'</span>
<span class="br0">&#41;</span></pre>
</div></p>

<p>and returns a single-quoted, comma-separated list of the values.</p>

<p>So calling</p>

<p><div>
<pre class="php">quote_value<span class="br0">&#40;</span><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st0">'title'</span> <span class="re2">=&gt;</span> <span class="st0">'Sir Elton John'</span>,
    <span class="st0">'email'</span> <span class="re2">=&gt;</span> <span class="st0">''</span>,
    <span class="st0">'job'</span>   <span class="re2">=&gt;</span> <span class="st0">'Singer/Composer'</span>
<span class="br0">&#41;</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>should return</p>

<p><div>
<pre>'Sir Elton John','','Singer/Composer'</pre>
</div></p>

<p>You may assume that there are no single-quotes in the values.</p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">quote_value</span><span class="br0">&#40;</span><span class="re0">$arr</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$vals</span> <span class="re2">=</span> <a href="http://www.php.net/array_values"><span class="kw3">array_values</span></a><span class="br0">&#40;</span><span class="re0">$arr</span><span class="br0">&#41;</span>;
    <span class="kw1">return</span> <span class="st0">'<span class="es0">\'</span>'</span>.<a href="http://www.php.net/implode"><span class="kw3">implode</span></a><span class="br0">&#40;</span><span class="st0">'<span class="es0">\'</span>,<span class="es0">\'</span>'</span>,<span class="re0">$vals</span><span class="br0">&#41;</span>.<span class="st0">'<span class="es0">\'</span>'</span>;
<span class="br0">&#125;</span></pre>
</div></p>

<p>If you did want to handle the case where single-quotes are allowed in the
values, you would need to escape all of them by replacing them with <code>\'</code>. PHP
has a built-in function <code>addslashes</code> that can be used to add slashes to
single- or double-quotes in a string. It has an associated function
<code>stripslashes</code> that can used to delete backslashes before quotes.</p>

<p>Here is a solution that properly handles slashes in the values:</p>

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">quote_value</span><span class="br0">&#40;</span><span class="re0">$arr</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$vals</span> <span class="re2">=</span> <a href="http://www.php.net/array_map"><span class="kw3">array_map</span></a><span class="br0">&#40;</span><span class="st0">'addslashes'</span>,<a href="http://www.php.net/array_values"><span class="kw3">array_values</span></a><span class="br0">&#40;</span><span class="re0">$arr</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
    <span class="kw1">return</span> <span class="st0">'<span class="es0">\'</span>'</span>.<a href="http://www.php.net/implode"><span class="kw3">implode</span></a><span class="br0">&#40;</span><span class="st0">'<span class="es0">\'</span>,<span class="es0">\'</span>'</span>,<span class="re0">$vals</span><span class="br0">&#41;</span>.<span class="st0">'<span class="es0">\'</span>'</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>Array to SQL &#x2605;&#x2605;&#x2605;</h2>

<p>Write a PHP function <code>insert_statement_for_array($table,$arr)</code> that
takes a table name and an array of associative arrays such as</p>

<p><div>
<pre class="php"><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
        <span class="st0">'title'</span> <span class="re2">=&gt;</span> <span class="st0">'Sir Elton John'</span>,
        <span class="st0">'email'</span> <span class="re2">=&gt;</span> <span class="st0">''</span>,
        <span class="st0">'job'</span>   <span class="re2">=&gt;</span> <span class="st0">'Singer/Composer'</span>
    <span class="br0">&#41;</span>,
    <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
        <span class="st0">'title'</span> <span class="re2">=&gt;</span> <span class="st0">'The Slayer of Dragons'</span>,
        <span class="st0">'email'</span> <span class="re2">=&gt;</span> <span class="st0">'dragonslayer@hotmail.com'</span>,
        <span class="st0">'job'</span>   <span class="re2">=&gt;</span> <span class="st0">'Barista'</span>
    <span class="br0">&#41;</span>
<span class="br0">&#41;</span>;</pre>
</div></p>

<p>and returns an SQL statement that could be used to insert the data in <code>$arr</code>
into the table <code>$table</code>.</p>

<p>So calling <code>insert_statement_for_array</code> on the above (with <code>$table</code> set to
<code>people</code>) should return something like</p>

<p><div>
<pre class="sql"><span class="kw1">INSERT</span> <span class="kw1">INTO</span> <span class="st0">`people`</span> <span class="br0">&#40;</span><span class="st0">`title`</span>,<span class="st0">`email`</span>,<span class="st0">`job`</span><span class="br0">&#41;</span>
    <span class="kw1">VALUES</span>
        <span class="br0">&#40;</span><span class="st0">'Sir Elton John'</span>,<span class="st0">''</span>,<span class="st0">'Singer/Composer'</span><span class="br0">&#41;</span>,
        <span class="br0">&#40;</span><span class="st0">'The Slayer of Dragons'</span>,<span class="st0">'dragonslayer@hotmail.com'</span>,<span class="st0">'Barista'</span><span class="br0">&#41;</span>
;</pre>
</div></p>

<p>(This should use your previous <code>quote_value</code> and <code>quote_columns</code> functions.)</p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">insert_statement_for_array</span><span class="br0">&#40;</span><span class="re0">$table</span>,<span class="re0">$arr</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$values</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="kw1">foreach</span> <span class="br0">&#40;</span> <span class="re0">$arr</span> <span class="kw1">as</span> <span class="re0">$value</span> <span class="br0">&#41;</span>
        <span class="re0">$values</span><span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="re2">=</span> <span class="st0">'('</span>.quote_value<span class="br0">&#40;</span><span class="re0">$value</span><span class="br0">&#41;</span>.<span class="st0">')'</span>;
    <span class="re0">$vals</span> <span class="re2">=</span> <a href="http://www.php.net/implode"><span class="kw3">implode</span></a><span class="br0">&#40;</span><span class="st0">', '</span>,<span class="re0">$values</span><span class="br0">&#41;</span>;
    <span class="re0">$cols</span> <span class="re2">=</span> quote_columns<span class="br0">&#40;</span><span class="re0">$arr</span><span class="br0">&#41;</span>;
    <span class="kw1">return</span> <span class="st0">&quot;INSERT INTO `$table` ($cols) VALUES $vals;&quot;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>Update Attributes &#x2605;&#x2605;</h2>

<p>The &#8220;U&#8221; part of C.R.U.D.&#8212;Update&#8212;is found in SQL (and in MySQL) in the
<code>UPDATE</code> statement. How clever. So updating a record involves running a query
string like this:</p>

<p><div>
<pre class="sql"><span class="kw1">UPDATE</span> <span class="st0">`people`</span>
   <span class="kw1">SET</span> <span class="st0">`title`</span>=<span class="st0">'A Slayer of Dragons'</span>,
       <span class="st0">`email`</span>=<span class="st0">'iheartdragons@gmail.com'</span>
 <span class="kw1">WHERE</span> <span class="st0">`id`</span>=<span class="nu0">1</span>
 <span class="kw1">LIMIT</span> <span class="nu0">1</span>
 ;</pre>
</div></p>

<p>(The <code>LIMIT</code> is perhaps extraneous considering we would never have two rows in
our <code>people</code> table with the same <code>id</code>, but it&#8217;s a good habit to be in: always
put a <code>LIMIT</code> declaration when you know in advance how many rows you&#8217;re
intending to update.)</p>

<p>With this in mind, create a function
<code>update_attributes_sql($table,$id,$attrs)</code> that takes the name of a table, an
id, and an associative array of attributes to update. It should then return
the (My)SQL to perform the update.</p>

<p>So we should be able to call</p>

<p><div>
<pre class="php">update_attributes_sql<span class="br0">&#40;</span> <span class="st0">'people'</span>, <span class="nu0">1</span>,
                <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span> <span class="st0">'title'</span> <span class="re2">=&gt;</span> <span class="st0">'A Slayer of Dragons'</span>,
                       <span class="st0">'email'</span> <span class="re2">=&gt;</span> <span class="st0">'iheartdragons@gmail.com'</span> <span class="br0">&#41;</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>to get the <code>UPDATE</code> SQL statement above.</p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">update_attributes_sql</span><span class="br0">&#40;</span><span class="re0">$table</span>, <span class="re0">$id</span>, <span class="re0">$attrs</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$acc</span>    <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">&quot;UPDATE `$table` SET &quot;</span><span class="br0">&#41;</span>;
    <span class="re0">$to_set</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="kw1">foreach</span><span class="br0">&#40;</span> <span class="re0">$attrs</span> <span class="kw1">as</span> <span class="re0">$attr</span><span class="re2">=&gt;</span><span class="re0">$val</span> <span class="br0">&#41;</span>
        <span class="re0">$to_set</span><span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="re2">=</span> <span class="st0">&quot;`$attr`='$val'&quot;</span>;
    <span class="re0">$acc</span><span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="re2">=</span> <a href="http://www.php.net/implode"><span class="kw3">implode</span></a><span class="br0">&#40;</span><span class="st0">', '</span>,<span class="re0">$to_set</span><span class="br0">&#41;</span>;
    <span class="re0">$acc</span><span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="re2">=</span> <span class="st0">&quot; WHERE `id`=$id LIMIT 1&quot;</span>;
    <span class="kw1">return</span> <a href="http://www.php.net/implode"><span class="kw3">implode</span></a><span class="br0">&#40;</span><span class="st0">''</span>,<span class="re0">$acc</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>Safe Input &#x2605;&#x2605;&#x2605;</h2>

<p>Create a function <code>sql_statement($array)</code> that takes in a single array. The
first item in <code>$array</code> (<code>$array[0]</code>) is an SQL statement with question marks
(<code>?</code>) in it. Then the following items in <code>$array</code> are to replace the question
marks <strong>in order</strong> after first cleaning them with the function
<code>mysql_real_escape_string</code> and surrounding them with quotes.</p>

<p>So calling</p>

<p><div>
<pre class="php">sql_statement<span class="br0">&#40;</span><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st0">'INSERT INTO `users` 
        (`title`,`username`)
        VALUES ( ?, ? )'</span>,
    <span class="st0">'Bobby McGee'</span>,
    <span class="st0">'bmcgee'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>returns the string</p>

<p><div>
<pre class="sql"><span class="kw1">INSERT</span> <span class="kw1">INTO</span> <span class="st0">`users`</span> 
    <span class="br0">&#40;</span><span class="st0">`title`</span>,<span class="st0">`username`</span><span class="br0">&#41;</span>
    <span class="kw1">VALUES</span> <span class="br0">&#40;</span> <span class="st0">'Bobby McGee'</span>, <span class="st0">'bmcgee'</span> <span class="br0">&#41;</span></pre>
</div></p>

<p>And calling</p>

<p><div>
<pre class="php">sql_statement<span class="br0">&#40;</span><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'My name is ?'</span>,<span class="st0">'Mickey Rooney'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>returns the string</p>

<p><div>
<pre>My name is 'Mickey Rooney'</pre>
</div></p>

<p><strong>Note:</strong> We are using the function <code>mysql_real_escape_string</code> here which
<em>requires a live database connection</em> to work. This is because the
<code>mysql_real_escape_string</code> function actually sends its argument to the server
to be cleaned up.</p>

<p>Moreover, if you are connecting to your database using something like</p>

<p><div>
<pre class="php"><span class="re0">$link</span> <span class="re2">=</span> <a href="http://www.php.net/mysql_connect"><span class="kw3">mysql_connect</span></a><span class="br0">&#40;</span><span class="st0">'host'</span>,<span class="st0">'user'</span>,<span class="st0">'pass'</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>then you will have to start your function in the manner of</p>

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">sql_statement</span><span class="br0">&#40;</span><span class="re0">$arr</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <a href="http://www.php.net/global"><span class="kw3">global</span></a> <span class="re0">$link</span>; <span class="co1">// THIS IS CRITICAL</span>
<span class="br0">&#125;</span></pre>
</div></p>

<p>or else your <code>mysql_real_escape_string</code> function won&#8217;t know how to connect to
the database server to sanitize the inputs.</p>

<p>You can test your function locally using the similar (<strong>but unsafe for real
database use</strong>) function <code>addslashes</code> in the place of
<code>mysql_real_escape_string</code>.</p>

<div class="showhide" title="">

<p>Here is the solution using <code>addslashes</code> instead of <code>mysql_real_escape_string</code>:</p>

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">sql_statement</span><span class="br0">&#40;</span><span class="re0">$tokens</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$statement</span> <span class="re2">=</span> <a href="http://www.php.net/array_shift"><span class="kw3">array_shift</span></a><span class="br0">&#40;</span><span class="re0">$tokens</span><span class="br0">&#41;</span>;
    <span class="co1">// something like 'name = ? and age = ?'</span>
    <span class="re0">$bits</span>      <span class="re2">=</span> <a href="http://www.php.net/explode"><span class="kw3">explode</span></a><span class="br0">&#40;</span><span class="st0">'?'</span>,<span class="re0">$statement</span><span class="br0">&#41;</span>;
    <span class="co1">// something like  [ 'name =', ' and age = ', '' ]</span>
&nbsp;
    <span class="co1">// If we have a ? at the beginning or end of our statement, then we'll</span>
    <span class="co1">// have one too many bits.  This is because</span>
    <span class="co1">//</span>
    <span class="co1">//     explode('?','? foo ?') = [ '', foo, '' ]</span>
    <span class="co1">// </span>
    <span class="co1">// So essentially we want to have something similar to implode but</span>
    <span class="co1">// instead of always gluing with the same string between each of the</span>
    <span class="co1">// bits, we want to glue with the next item in $tokens.</span>
&nbsp;
    <span class="co1">// $ii starts at 1 because never want to put a $token before our first</span>
    <span class="co1">// $bit.  If our $statement starts with a ? then $bits[0] will just</span>
    <span class="co1">// be the empty string.</span>
    <span class="re0">$result</span> <span class="re2">=</span> <span class="re0">$bits</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>;
    <span class="re0">$c</span>      <span class="re2">=</span> <a href="http://www.php.net/count"><span class="kw3">count</span></a><span class="br0">&#40;</span><span class="re0">$bits</span><span class="br0">&#41;</span>;
    <span class="kw1">for</span><span class="br0">&#40;</span> <span class="re0">$ii</span><span class="re2">=</span><span class="nu0">1</span>; <span class="re0">$ii</span> <span class="re2">&lt;</span> <span class="re0">$c</span>; <span class="re0">$ii</span>++<span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="kw1">if</span> <span class="br0">&#40;</span> <a href="http://www.php.net/count"><span class="kw3">count</span></a><span class="br0">&#40;</span><span class="re0">$tokens</span><span class="br0">&#41;</span> <span class="re2">&gt;</span> <span class="nu0">0</span> <span class="br0">&#41;</span> <span class="co1">// we have more things left to add in</span>
        <span class="br0">&#123;</span>
            <span class="re0">$clean</span>   <span class="re2">=</span> <a href="http://www.php.net/addslashes"><span class="kw3">addslashes</span></a><span class="br0">&#40;</span><a href="http://www.php.net/array_shift"><span class="kw3">array_shift</span></a><span class="br0">&#40;</span><span class="re0">$tokens</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
            <span class="re0">$result</span> .<span class="re2">=</span> <span class="st0">&quot;'$clean'&quot;</span>;
        <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="co1">// nothing left but still have a ? in the $statement so put it</span>
               <span class="co1">// back in there</span>
        <span class="br0">&#123;</span>
            <span class="re0">$result</span> .<span class="re2">=</span> <span class="st0">&quot;?&quot;</span>;
        <span class="br0">&#125;</span>
        <span class="re0">$result</span> .<span class="re2">=</span> <span class="re0">$bits</span><span class="br0">&#91;</span><span class="re0">$ii</span><span class="br0">&#93;</span>;
    <span class="br0">&#125;</span>
    <span class="kw1">return</span> <span class="re0">$result</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>The <code>list</code> Language Contruct</h2>

<p>Not a problem for this one, just an observation.</p>

<p>Imagine you need to separate the string &#8220;Abraham Lincoln&#8221; into the first name
and the last name. This is simple using the magic of the
<code>explode($separator,$string)</code> function that separates <code>$string</code> into an array
of substrings:</p>

<p><div>
<pre class="php"><span class="re0">$name</span>  <span class="re2">=</span> <span class="st0">&quot;Abraham Lincoln&quot;</span>;
<span class="re0">$split</span> <span class="re2">=</span> <a href="http://www.php.net/explode"><span class="kw3">explode</span></a><span class="br0">&#40;</span><span class="st0">' '</span>,<span class="re0">$name</span><span class="br0">&#41;</span>;
<span class="re0">$first</span> <span class="re2">=</span> <span class="re0">$split</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>;
<span class="re0">$last</span>  <span class="re2">=</span> <span class="re0">$split</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>;</pre>
</div></p>

<p>It turns out we can do this in a simpler step:</p>

<p><div>
<pre class="php"><span class="re0">$name</span> <span class="re2">=</span> <span class="st0">'Abraham Lincoln'</span>;
<a href="http://www.php.net/list"><span class="kw3">list</span></a><span class="br0">&#40;</span><span class="re0">$first</span>,<span class="re0">$last</span><span class="br0">&#41;</span> <span class="re2">=</span> <a href="http://www.php.net/explode"><span class="kw3">explode</span></a><span class="br0">&#40;</span><span class="st0">' '</span>,<span class="re0">$name</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>The <code>list</code> you see there isn&#8217;t actually a function&#8212;it&#8217;s a <em>language
construct</em> much in the same way that <code>if</code> and <code>foreach</code> are. Here is a simpler
example of <code>list</code> in action:</p>

<p><div>
<pre class="php"><a href="http://www.php.net/list"><span class="kw3">list</span></a><span class="br0">&#40;</span><span class="re0">$one</span>,<span class="re0">$two</span>,<span class="re0">$three</span>,<span class="re0">$four</span><span class="br0">&#41;</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="nu0">1</span>,<span class="nu0">2</span>,<span class="nu0">3</span>,<span class="nu0">4</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>which is equivalent to</p>

<p><div>
<pre class="php"><span class="re0">$temp</span>  <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="nu0">1</span>,<span class="nu0">2</span>,<span class="nu0">3</span>,<span class="nu0">4</span><span class="br0">&#41;</span>;
<span class="re0">$four</span>  <span class="re2">=</span> <span class="re0">$temp</span><span class="br0">&#91;</span><span class="nu0">3</span><span class="br0">&#93;</span>;
<span class="re0">$three</span> <span class="re2">=</span> <span class="re0">$temp</span><span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span>;
<span class="re0">$two</span>   <span class="re2">=</span> <span class="re0">$temp</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>;
<span class="re0">$one</span>   <span class="re2">=</span> <span class="re0">$temp</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>;
<a href="http://www.php.net/unset"><span class="kw3">unset</span></a><span class="br0">&#40;</span><span class="re0">$temp</span><span class="br0">&#41;</span></pre>
</div></p>

<p>which is equivalent to</p>

<p><div>
<pre class="php"><span class="re0">$one</span>   <span class="re2">=</span> <span class="nu0">1</span>;
<span class="re0">$two</span>   <span class="re2">=</span> <span class="nu0">2</span>;
<span class="re0">$three</span> <span class="re2">=</span> <span class="nu0">3</span>;
<span class="re0">$four</span>  <span class="re2">=</span> <span class="nu0">4</span>;</pre>
</div></p>

<p>This construct is helpful to the implementation of the <code>foreach</code> construct
which is discussed later.</p>

<h2>Array Equality? &#x2605;&#x2605;&#x2605;&#x2605;</h2>

<p>PHP has built-in mechanisms to compare arrays for equality. For instance, you
can do something like</p>

<p><div>
<pre class="php"><span class="re0">$a</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span> <span class="nu0">1</span>, <span class="nu0">2</span>, <span class="nu0">3</span>, <span class="nu0">4</span> <span class="br0">&#41;</span>;
<span class="re0">$b</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span> <span class="nu0">1</span>, <span class="nu0">2</span>, <span class="nu0">3</span>, <span class="nu0">4</span> <span class="br0">&#41;</span>;
<span class="re0">$a</span> <span class="re2">==</span> <span class="re0">$b</span>; <span class="co1">// this is true</span></pre>
</div></p>

<p>Imagine, though, that this weren&#8217;t built into the language.</p>

<p>Create a function <code>arrays_equal($a,$b)</code> that returns <code>true</code> if and only if
<code>$a</code> and <code>$b</code> are the same.</p>

<p>There are several things to think about:</p>

<ol>
<li><p>What if you have nested arrays?</p>

<p>PHP&#8217;s built-in equality comparison <em>does</em> compare nested arrays, and so
should yours. So your function <strong>should call itself</strong> if it comes across
values that are arrays.</p>

<p>This is an example of <a href="http://en.wikipedia.org/wiki/Recursion">recursion</a>, which is a very deep subject in
computer science in general, but this use of it is very simple. Here is an
example of a function that computes the <a href="http://en.wikipedia.org/wiki/Factorial">factorial</a> of <em>n</em>:</p>

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">factorial</span><span class="br0">&#40;</span><span class="re0">$n</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span> <span class="re0">$n</span> <span class="re2">==</span> <span class="nu0">0</span> <span class="kw1">or</span> <span class="re0">$n</span> <span class="re2">==</span> <span class="nu0">1</span> <span class="br0">&#41;</span>
        <span class="kw1">return</span> <span class="nu0">1</span>;
    <span class="kw1">return</span> <span class="re0">$n</span> * factorial<span class="br0">&#40;</span><span class="re0">$n</span><span class="nu0">-1</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

<p>Specifically to this problem, you&#8217;ll want to compare the values in your
two arrays depending on their type: if they&#8217;re not arrays, you can use the
regular <code>==</code> comparison. if they are arrays, then you have to compare them
using a mechanism that compares arrays for equality. That certainly does
sound familiar&#8230;</p></li>
<li><p>What if the two arrays have all the same keys and all the same
values but in a different order? Note that this only makes sense
with associative arrays. Regular arrays are of course ordered.</p>

<p>For instance, we would consider <code>array(1,2,3)</code> different from
<code>array(3,2,1)</code>. To see why this is the case, look at the keys and values
in these arrays. Remember that all arrays in PHP are just mappings from
keys to values.</p>

<p>So then <code>array(1,2,3)</code> is as follows when re-written using the
associative-array syntax:</p>

<p><div>
<pre class="php"><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>  <span class="nu0">0</span> <span class="re2">=&gt;</span> <span class="nu0">1</span>,     <span class="co1">// key 0 has value 1</span>
        <span class="nu0">1</span> <span class="re2">=&gt;</span> <span class="nu0">2</span>,     <span class="co1">// key 1 has value 2</span>
        <span class="nu0">2</span> <span class="re2">=&gt;</span> <span class="nu0">3</span> <span class="br0">&#41;</span>    <span class="co1">// key 2 has value 3</span></pre>
</div></p>

<p>and <code>array(3,2,1)</code> is essentially</p>

<p><div>
<pre class="php"><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>  <span class="nu0">0</span> <span class="re2">=&gt;</span> <span class="nu0">3</span>,     <span class="co1">// key 0 has value 3</span>
        <span class="nu0">1</span> <span class="re2">=&gt;</span> <span class="nu0">2</span>,     <span class="co1">// key 1 has value 2</span>
        <span class="nu0">2</span> <span class="re2">=&gt;</span> <span class="nu0">1</span> <span class="br0">&#41;</span>;   <span class="co1">// key 2 has value 1</span></pre>
</div></p>

<p>With associative arrays, there is no real sense of different key/value
pairs having an order. So one key/value pair isn&#8217;t really <em>before</em> or
<em>after</em> any of the other key/value pairs So the following two arrays are
the same:</p>

<p><div>
<pre class="php"><span class="re0">$superman</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st0">'identity'</span>   <span class="re2">=&gt;</span> <span class="st0">'Clark Kent'</span>,
    <span class="st0">'girlfriend'</span> <span class="re2">=&gt;</span> <span class="st0">'Lois Lane'</span>,
    <span class="st0">'weakness'</span>   <span class="re2">=&gt;</span> <span class="st0">'Kryptonite'</span>
<span class="br0">&#41;</span>;
<span class="re0">$superman2</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st0">'weakness'</span>   <span class="re2">=&gt;</span> <span class="st0">'Kryptonite'</span>   <span class="co1">// Notice that the keys</span>
    <span class="st0">'identity'</span>   <span class="re2">=&gt;</span> <span class="st0">'Clark Kent'</span>,  <span class="co1">// and values are in a</span>
    <span class="st0">'girlfriend'</span> <span class="re2">=&gt;</span> <span class="st0">'Lois Lane'</span>,   <span class="co1">// different order here.</span>
<span class="br0">&#41;</span>;</pre>
</div></p>

<p><strong>Essentially, we must have that the all the keys and values match in both
of the arrays.</strong></p></li>
</ol>

<p>Calling</p>

<p><div>
<pre class="php">arrays_equal<span class="br0">&#40;</span>
    <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="nu0">1</span>, <span class="nu0">2</span>, <span class="st0">'sub'</span> <span class="re2">=&gt;</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="nu0">3</span>,<span class="nu0">4</span>,<span class="nu0">5</span><span class="br0">&#41;</span> <span class="br0">&#41;</span>,
    <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="nu0">1</span>, <span class="st0">'sub'</span> <span class="re2">=&gt;</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="nu0">3</span>,<span class="nu0">4</span>,<span class="nu0">5</span><span class="br0">&#41;</span>, <span class="nu0">2</span> <span class="br0">&#41;</span>
<span class="br0">&#41;</span>;</pre>
</div></p>

<p>returns <code>true</code>.  And calling</p>

<p><div>
<pre class="php">arrays_equal<span class="br0">&#40;</span>
    <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="nu0">1</span>, <span class="nu0">2</span>, <span class="st0">'sub'</span> <span class="re2">=&gt;</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="nu0">3</span>,<span class="nu0">4</span>,<span class="nu0">5</span><span class="br0">&#41;</span> <span class="br0">&#41;</span>,
    <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="nu0">1</span>, <span class="st0">'sub'</span> <span class="re2">=&gt;</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="nu0">5</span>,<span class="nu0">4</span>,<span class="nu0">3</span><span class="br0">&#41;</span>, <span class="nu0">2</span> <span class="br0">&#41;</span> <span class="co1">// the 'sub' array is a 'regular'</span>
                                        <span class="co1">// array in a different order than</span>
                                        <span class="co1">// it is in the previous example.</span>
<span class="br0">&#41;</span>;</pre>
</div></p>

<p>returns <code>false</code>.</p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">arrays_equal</span><span class="br0">&#40;</span><span class="re0">$a</span>, <span class="re0">$b</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="co1">// we can only run this on arrays:</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span> !<a href="http://www.php.net/is_array"><span class="kw3">is_array</span></a><span class="br0">&#40;</span><span class="re0">$a</span><span class="br0">&#41;</span> <span class="kw1">or</span> !<a href="http://www.php.net/is_array"><span class="kw3">is_array</span></a><span class="br0">&#40;</span><span class="re0">$b</span><span class="br0">&#41;</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> <span class="kw2">false</span>; <span class="br0">&#125;</span>
    <span class="re0">$a_count</span> <span class="re2">=</span> <a href="http://www.php.net/count"><span class="kw3">count</span></a><span class="br0">&#40;</span><span class="re0">$a</span><span class="br0">&#41;</span>;
    <span class="re0">$b_count</span> <span class="re2">=</span> <a href="http://www.php.net/count"><span class="kw3">count</span></a><span class="br0">&#40;</span><span class="re0">$b</span><span class="br0">&#41;</span>;
    <span class="co1">// two different-sized arrays can never be the same</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span> <span class="re0">$a_count</span> <span class="re2">!=</span> <span class="re0">$b_count</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="kw1">return</span> <span class="kw2">false</span>; <span class="br0">&#125;</span>
    <span class="re0">$a_keys</span> <span class="re2">=</span> <a href="http://www.php.net/array_keys"><span class="kw3">array_keys</span></a><span class="br0">&#40;</span><span class="re0">$a</span><span class="br0">&#41;</span>;
    <span class="kw1">for</span><span class="br0">&#40;</span> <span class="re0">$j</span><span class="re2">=</span><span class="nu0">0</span>; <span class="re0">$j</span> <span class="re2">&lt;</span> <span class="re0">$a_count</span>; <span class="re0">$j</span>++ <span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="co1">// note that we have two index variables now: $j which loops over</span>
        <span class="co1">// the keys in $a and $b; $i is just what key that is for $a. So</span>
        <span class="co1">// $a[$i] is always equal to $a[$j]. But we don't want to test</span>
        <span class="co1">// that $a[$i] == $b[$i] because $b's keys might be in a different</span>
        <span class="co1">// order, although they still could associate the same values to</span>
        <span class="co1">// those keys as $a's keys do.</span>
        <span class="re0">$i</span> <span class="re2">=</span> <span class="re0">$a_keys</span><span class="br0">&#91;</span><span class="re0">$j</span><span class="br0">&#93;</span>;
        <span class="kw1">if</span> <span class="br0">&#40;</span> <a href="http://www.php.net/is_array"><span class="kw3">is_array</span></a><span class="br0">&#40;</span><span class="re0">$a</span><span class="br0">&#91;</span><span class="re0">$i</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            <span class="kw1">if</span> <span class="br0">&#40;</span> !<a href="http://www.php.net/is_array"><span class="kw3">is_array</span></a><span class="br0">&#40;</span><span class="re0">$b</span><span class="br0">&#91;</span><span class="re0">$i</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span>
                <span class="kw1">return</span> <span class="kw2">false</span>;
            <span class="co1">// so now both $a[$i] and $b[$i] are arrays and we have to</span>
            <span class="co1">// call ourselves to see if the sub-arrays are equal.</span>
            <span class="kw1">if</span> <span class="br0">&#40;</span> !arrays_equal<span class="br0">&#40;</span><span class="re0">$a</span><span class="br0">&#91;</span><span class="re0">$i</span><span class="br0">&#93;</span>,<span class="re0">$b</span><span class="br0">&#91;</span><span class="re0">$i</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span>
                <span class="kw1">return</span> <span class="kw2">false</span>;
        <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="kw1">if</span> <span class="br0">&#40;</span> <a href="http://www.php.net/is_array"><span class="kw3">is_array</span></a><span class="br0">&#40;</span><span class="re0">$b</span><span class="br0">&#91;</span><span class="re0">$i</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span>
        <span class="br0">&#123;</span>
            <span class="co1">// because we're in an `else if` here, we know that $a[$i] is</span>
            <span class="co1">// not an array (or else that branch would have been taken).</span>
            <span class="co1">// So then if $b[$i] is an array, then there's problems...</span>
            <span class="kw1">return</span> <span class="kw2">false</span>;
        <span class="br0">&#125;</span> <span class="kw1">else</span>
        <span class="br0">&#123;</span>
            <span class="co1">// here neither $a[$i] nor $b[$i] is an array, so we do just</span>
            <span class="co1">// regular comparison using `==`:</span>
            <span class="kw1">if</span> <span class="br0">&#40;</span> <span class="re0">$a</span><span class="br0">&#91;</span><span class="re0">$i</span><span class="br0">&#93;</span> <span class="re2">!=</span> <span class="re0">$b</span><span class="br0">&#91;</span><span class="re0">$i</span><span class="br0">&#93;</span> <span class="br0">&#41;</span>
                <span class="kw1">return</span> <span class="kw2">false</span>;
        <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
    <span class="kw1">return</span> <span class="kw2">true</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>Array Finder  &#x2605;&#x2605;</h2>

<p>Make a function <code>find_key_for($val,$array)</code> that returns the key for <code>$val</code> if
it&#8217;s in <code>$array</code> or <code>FALSE</code> if it&#8217;s not.</p>

<p>So running</p>

<p><div>
<pre class="php">find_key_for
<span class="br0">&#40;</span>  <span class="st0">'baseball'</span>,
    <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>  <span class="st0">'movie'</span><span class="re2">=&gt;</span><span class="st0">'fight club'</span>,
            <span class="st0">'sport'</span><span class="re2">=&gt;</span><span class="st0">'baseball'</span><span class="br0">&#41;</span>
<span class="br0">&#41;</span>;</pre>
</div></p>

<p>returns <code>'sport'</code>.</p>

<p><strong>Hint</strong> You can use your earlier <code>my_array_flip($arr)</code> to make this very
easy!</p>

<div class="showhide" title="">

<p>Here is the &#8220;very easy&#8221; solution:</p>

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">find_key_for</span><span class="br0">&#40;</span><span class="re0">$val</span>,<span class="re0">$array</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$flipped</span> <span class="re2">=</span> my_array_flip<span class="br0">&#40;</span><span class="re0">$array</span><span class="br0">&#41;</span>;
    <span class="kw1">return</span> <span class="re0">$flipped</span><span class="br0">&#91;</span><span class="re0">$val</span><span class="br0">&#93;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

<p>and here is the &#8220;traditional&#8221; solution:</p>

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">find_key_for</span><span class="br0">&#40;</span><span class="re0">$val</span>,<span class="re0">$array</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="kw1">foreach</span> <span class="br0">&#40;</span> <span class="re0">$array</span> <span class="kw1">as</span> <span class="re0">$key</span><span class="re2">=&gt;</span><span class="re0">$v</span> <span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="kw1">if</span> <span class="br0">&#40;</span> <span class="re0">$val</span> <span class="re2">==</span> <span class="re0">$v</span> <span class="br0">&#41;</span>
            <span class="kw1">return</span> <span class="re0">$key</span>;
    <span class="br0">&#125;</span>
    <span class="kw1">return</span> <span class="kw2">FALSE</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>CSV to SQL &#x2605;&#x2605;</h2>

<p>Create a function <code>csv_to_sql($table,$file)</code> that takes the name of a database
table and a filename of a CSV file as parameters and returns the SQL to insert
the data from the file into the table.</p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">csv_to_sql</span><span class="br0">&#40;</span><span class="re0">$table</span>,<span class="re0">$file</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$arr</span> <span class="re2">=</span> csv_to_array<span class="br0">&#40;</span><span class="re0">$file</span><span class="br0">&#41;</span>;
    <span class="kw1">return</span> insert_statement_for_array<span class="br0">&#40;</span><span class="re0">$table</span>,<span class="re0">$arr</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>Implementing The <code>foreach</code> Loop &#x2605;&#x2605;&#x2605;&#x2605;</h2>

<p>This one is again not a problem but is rather just an explanation of a
concept. It is rated 4-&#x2605;s, though, because of how confusing this problem can
be for those new to PHP.</p>

<p>Recall that the <code>foreach</code> loop is used to <em>iterate</em> over an array giving you
access to each key/value pair in the manner of</p>

<p><div>
<pre class="php"><span class="re0">$chars</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st0">'Yertle'</span> <span class="re2">=&gt;</span> <span class="st0">'turtle'</span>,
    <span class="st0">'Hooey'</span>  <span class="re2">=&gt;</span> <span class="st0">'parrot'</span>,
    <span class="st0">'Horton'</span> <span class="re2">=&gt;</span> <span class="st0">'elephant'</span>
<span class="br0">&#41;</span>;
<span class="kw1">foreach</span> <span class="br0">&#40;</span> <span class="re0">$chars</span> <span class="kw1">as</span> <span class="re0">$name</span> <span class="re2">=&gt;</span> <span class="re0">$animal</span> <span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="st0">&quot;$name is a(n) $animal<span class="es0">\n</span>&quot;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

<p>which would echo the screen</p>

<p><div>
<pre>Yertle is a(n) turtle
Hooey is a(n) parrot
Horton is a(n) elephant</pre>
</div></p>

<p>It turns out that we can implement our own version of the <code>foreach</code> loop using
a little-known fact about arrays in PHP.</p>

<p>In addition to keeping track of a bunch of key/value pairs, arrays also keep
track of an <em>internal pointer</em> that can be used with the <code>each</code> function (and
a few others). This internal pointer starts by pointing to the first key/value
pair in the array. The <code>each</code> function then asks the array to give back the
&#8220;<em>pointed-to</em>&#8221; key/value pair as an array <em>and to then move the internal
pointer down one.</em> If the pointer &#8220;falls off the end&#8221; (when there is no more
key-value pairs left), then <code>each</code> returns <code>false</code>.</p>

<p>To illustrate, imagine we had an array called <code>$people</code>,</p>

<p><div>
<pre class="php"><span class="re0">$people</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st0">'Cindy'</span>,  <span class="st0">'Greg'</span>,
    <span class="st0">'Marcia'</span>, <span class="st0">'Jan'</span>,
    <span class="st0">'Bobby'</span>,
    <span class="st0">'Oldest'</span>   <span class="re2">=&gt;</span> <span class="st0">'Marcia'</span>,
    <span class="st0">'Youngest'</span> <span class="re2">=&gt;</span> <span class="st0">'Bobby'</span>
<span class="br0">&#41;</span>;</pre>
</div></p>

<p>Pictorially, this array looks like</p>

<p><div>
<pre>    +----------+--------+
    |      Key | Value  |
    +----------+--------+
--&gt; |        0 | Cindy  |
    |        1 | Greg   |
    |        2 | Marcia |
    |        3 | Jan    |
    |        4 | Bobby  |
    |   Oldest | Marcia |
    | Youngest | Bobby  |
    +----------+--------+</pre>
</div></p>

<p>The arrow, <code>--&gt;</code>, represents the internal pointer.</p>

<p>We can then call</p>

<p><div>
<pre class="php"><span class="re0">$first_key_value_pair</span> <span class="re2">=</span> <a href="http://www.php.net/each"><span class="kw3">each</span></a><span class="br0">&#40;</span><span class="re0">$family</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>and have that <code>$first_key_value_pair = array(0,'Cindy')</code>. Notice that <code>each</code>
operates on an array and returns an array. The first item (0) in the array
that it returns is the &#8220;pointed-to&#8221; <strong>key</strong> from the array it operated on
while the second item (Cindy) in the array that it returns is the &#8220;pointed-to&#8221;
<strong>value</strong>.</p>

<p>(All arrays have this internal pointer&#8212;even the array we&#8217;re given back from
<code>each</code>&#8212;but they aren&#8217;t always very useful.)</p>

<p>After we call <code>each($family)</code>, the <code>$family</code> array has changed: its internal
pointer has been moved down one row:</p>

<p><div>
<pre>    +----------+--------+
    |      Key | Value  |
    +----------+--------+
    |        0 | Cindy  |
--&gt; |        1 | Greg   |
    |        2 | Marcia |
    |        3 | Jan    |
    |        4 | Bobby  |
    |   Oldest | Marcia |
    | Youngest | Bobby  |
    +----------+--------+</pre>
</div></p>

<p>So calling <code>each</code> again on <code>$family</code> will now return <code>array(1,'Greg')</code> and
will move the pointer down yet another row&#8230;</p>

<p>We could repeat this process several times:</p>

<p><div>
<pre>     +----------+--------+                 +----------+--------+
     |      Key | Value  |                 |      Key | Value  |
     +----------+--------+                 +----------+--------+
     |        0 | Cindy  |                 |        0 | Cindy  |
 --&gt; |        1 | Greg   |                 |        1 | Greg   |
     |        2 | Marcia |             --&gt; |        2 | Marcia |
     |        3 | Jan    |                 |        3 | Jan    |
     |        4 | Bobby  |                 |        4 | Bobby  |
     |   Oldest | Marcia |                 |   Oldest | Marcia |
     | Youngest | Bobby  |                 | Youngest | Bobby  |
     +----------+--------+                 +----------+--------+
  each returns array(1,'Greg')          each returns array(2,'Marcia')
&nbsp;
     +----------+--------+                 +----------+--------+
     |      Key | Value  |                 |      Key | Value  |
     +----------+--------+                 +----------+--------+
     |        0 | Cindy  |                 |        0 | Cindy  |
     |        1 | Greg   |                 |        1 | Greg   |
     |        2 | Marcia |                 |        2 | Marcia |
 --&gt; |        3 | Jan    |                 |        3 | Jan    |
     |        4 | Bobby  |            --&gt;  |        4 | Bobby  |
     |   Oldest | Marcia |                 |   Oldest | Marcia |
     | Youngest | Bobby  |                 | Youngest | Bobby  |
     +----------+--------+                 +----------+--------+
  each returns array(3,'Jan')           each returns array(4,'Jan')
&nbsp;
     +----------+--------+                 +----------+--------+
     |      Key | Value  |                 |      Key | Value  |
     +----------+--------+                 +----------+--------+
     |        0 | Cindy  |                 |        0 | Cindy  |
     |        1 | Greg   |                 |        1 | Greg   |
     |        2 | Marcia |                 |        2 | Marcia |
     |        3 | Jan    |                 |        3 | Jan    |
     |        4 | Bobby  |                 |        4 | Bobby  |
--&gt;  |   Oldest | Marcia |                 |   Oldest | Marcia |
     | Youngest | Bobby  |             --&gt; | Youngest | Bobby  |
     +----------+--------+                 +----------+--------+
     each returns                       each returns
            array('Oldest','Marcia')          array('Youngest','Bobby')</pre>
</div></p>

<p>And then finally when there are no more lines left for the internal pointer to
move to, we can call <code>each</code> once more and get</p>

<p><div>
<pre>    +----------+--------+
    |      Key | Value  |
    +----------+--------+
    |        0 | Cindy  |
    |        1 | Greg   |
    |        2 | Marcia |
    |        3 | Jan    |
    |        4 | Bobby  |
    |   Oldest | Marcia |
    | Youngest | Bobby  |
--&gt; +----------+--------+</pre>
</div></p>

<p>In this scenario, <code>each</code> will return <code>false</code> to indicate that there are no
more key/value pairs.</p>

<p>Putting this all together, how can we implement the <code>foreach</code> loop? Very
easily! All we have to do is use our good old friend the <code>while</code> loop.</p>

<p>Let&#8217;s implement the same bit of code that we had before:</p>

<p><div>
<pre class="php"><span class="re0">$chars</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st0">'Yertle'</span> <span class="re2">=&gt;</span> <span class="st0">'turtle'</span>,
    <span class="st0">'Hooey'</span>  <span class="re2">=&gt;</span> <span class="st0">'parrot'</span>,
    <span class="st0">'Horton'</span> <span class="re2">=&gt;</span> <span class="st0">'elephant'</span>
<span class="br0">&#41;</span>;
<span class="kw1">foreach</span> <span class="br0">&#40;</span> <span class="re0">$chars</span> <span class="kw1">as</span> <span class="re0">$name</span> <span class="re2">=&gt;</span> <span class="re0">$animal</span> <span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="st0">&quot;$name is a(n) $animal<span class="es0">\n</span>&quot;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

<p>only now using our new friend <code>each</code>. As a convenience, we also use the <code>list</code>
language construct which is discussed above.</p>

<p><div>
<pre class="php"><span class="re0">$chars</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st0">'Yertle'</span> <span class="re2">=&gt;</span> <span class="st0">'turtle'</span>,
    <span class="st0">'Hooey'</span>  <span class="re2">=&gt;</span> <span class="st0">'parrot'</span>,
    <span class="st0">'Horton'</span> <span class="re2">=&gt;</span> <span class="st0">'elephant'</span>
<span class="br0">&#41;</span>;
<span class="kw1">while</span> <span class="br0">&#40;</span> <a href="http://www.php.net/list"><span class="kw3">list</span></a><span class="br0">&#40;</span><span class="re0">$name</span>,<span class="re0">$animal</span><span class="br0">&#41;</span> <span class="re2">=</span> <a href="http://www.php.net/each"><span class="kw3">each</span></a><span class="br0">&#40;</span><span class="re0">$chars</span><span class="br0">&#41;</span> <span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="st0">&quot;$name is a(n) $animal<span class="es0">\n</span>&quot;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

<p>and that&#8217;s all there is to it folks!</p>

<p>Refer to the earlier &#8220;Assignment Statements As Return Values&#8221; for an
explanation on why we can use something like</p>

<p><div>
<pre class="php"><span class="kw1">while</span> <span class="br0">&#40;</span> <a href="http://www.php.net/list"><span class="kw3">list</span></a><span class="br0">&#40;</span><span class="re0">$name</span>,<span class="re0">$animal</span><span class="br0">&#41;</span> <span class="re2">=</span> <a href="http://www.php.net/each"><span class="kw3">each</span></a><span class="br0">&#40;</span><span class="re0">$chars</span><span class="br0">&#41;</span> <span class="br0">&#41;</span></pre>
</div></p>

<p>instead of having to do this &#8220;the hard way&#8221;:</p>

<p><div>
<pre class="php"><span class="re0">$chars</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st0">'Yertle'</span> <span class="re2">=&gt;</span> <span class="st0">'turtle'</span>,
    <span class="st0">'Hooey'</span>  <span class="re2">=&gt;</span> <span class="st0">'parrot'</span>,
    <span class="st0">'Horton'</span> <span class="re2">=&gt;</span> <span class="st0">'elephant'</span>
<span class="br0">&#41;</span>;
<span class="re0">$temp</span> <span class="re2">=</span> <a href="http://www.php.net/each"><span class="kw3">each</span></a><span class="br0">&#40;</span><span class="re0">$chars</span><span class="br0">&#41;</span>;
<span class="kw1">while</span> <span class="br0">&#40;</span> <span class="re0">$temp</span> <span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$name</span>   <span class="re2">=</span> <span class="re0">$temp</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>;
    <span class="re0">$animal</span> <span class="re2">=</span> <span class="re0">$temp</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>;
    <a href="http://www.php.net/echo"><span class="kw3">echo</span></a> <span class="st0">&quot;$name is a(n) $animal<span class="es0">\n</span>&quot;</span>;
    <span class="re0">$temp</span>   <span class="re2">=</span> <a href="http://www.php.net/each"><span class="kw3">each</span></a><span class="br0">&#40;</span><span class="re0">$chars</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

<h2>Where Statement &#x2605;&#x2605;</h2>

<p>If you want to do anything to your database table other than create new rows
(a/k/a <code>INSERT</code> in SQL), then you&#8217;re going to need to tell the database what
rows you plan to do something with.</p>

<p>SQL achieves this using its <code>WHERE</code> declaration. For example, the following
SQL can be used to delete all people named &#8216;Sir Elton John&#8217; from a table
called <code>people</code>:</p>

<p><div>
<pre class="sql"><span class="kw1">DELETE</span> <span class="kw1">FROM</span> <span class="st0">`people`</span>
      <span class="kw1">WHERE</span> <span class="st0">`name`</span>=<span class="st0">'Sir Elton John'</span>
;</pre>
</div></p>

<p>Remember that SQL uses back-quotes to surround table- and column-names and
single- or double-quotes to surround string values. Also note that there isn&#8217;t
a second equals sign there &#8212; we don&#8217;t have to use a double-equals (<code>==</code>) in
SQL when doing equality comparison.</p>

<p>If you want to specify multiple conditions, you simply separate them with
<code>AND</code> or <code>OR</code>. The following SQL can be used to delete all people named &#8216;Sir
Elton John&#8217; with the job &#8216;Barista&#8217; from our <code>people</code> database:</p>

<p><div>
<pre class="sql"><span class="kw1">DELETE</span> <span class="kw1">FROM</span> <span class="st0">`people`</span>
      <span class="kw1">WHERE</span> <span class="st0">`name`</span>=<span class="st0">'Sir Elton John'</span>
        <span class="kw1">AND</span> <span class="st0">`job`</span>=<span class="st0">'Barista'</span>
;</pre>
</div></p>

<p>Your job is to make a function <code>where_statement($conditions,$op)</code> that takes
an array of conditions and an operation (either &#8216;AND&#8217; or &#8216;OR&#8217;) that produces
the &#8220;WHERE&#8221; part of an SQL statement for those conditions. The <code>$op</code> should
default to &#8216;AND&#8217;.</p>

<p>For example, the following code</p>

<p><div>
<pre class="php">where_statement<span class="br0">&#40;</span><a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st0">'name'</span> <span class="re2">=&gt;</span> <span class="st0">'Sir Elton John'</span>,
    <span class="st0">'job'</span>  <span class="re2">=&gt;</span> <span class="st0">'Barista'</span>
    ,<span class="st0">'AND'</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>should return</p>

<p><div>
<pre class="sql"><span class="st0">`name`</span>=<span class="st0">'Sir Elton John'</span> <span class="kw1">AND</span> <span class="st0">`job`</span>=<span class="st0">'Barista'</span></pre>
</div></p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">where_statement</span><span class="br0">&#40;</span><span class="re0">$conditions</span>,<span class="re0">$op</span><span class="re2">=</span><span class="st0">'AND'</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$acc</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="kw1">foreach</span><span class="br0">&#40;</span> <span class="re0">$conditions</span> <span class="kw1">as</span> <span class="re0">$col</span><span class="re2">=&gt;</span><span class="re0">$val</span><span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="re0">$acc</span><span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="re2">=</span> <span class="st0">&quot;`$col`='$val'&quot;</span>;
    <span class="br0">&#125;</span>
    <span class="kw1">return</span> <a href="http://www.php.net/implode"><span class="kw3">implode</span></a><span class="br0">&#40;</span><span class="st0">&quot; $op &quot;</span>,<span class="re0">$acc</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>Select Rows &#x2605;&#x2605;&#x2605;</h2>

<p>Once you have a query formed and ready to execute on your database, you simply
pass it to MySQL using the built-in <code>mysql_query($query,$link)</code> function. This
requires that you first establish a <code>$link</code> variable using
<a href="http://php.net/mysql_connect"><code>mysql_connect</code></a>.</p>

<p>What <code>mysql_query</code> returns is a blob of completely useless data that you can&#8217;t
directly work with. You can, however, work with it using one of the many
built-in MySQL functions.</p>

<p>Here is an example of PHP code that selects information about users born in
1955 from a database and puts them all into an array <code>$users</code>:</p>

<p><div>
<pre class="php"><span class="re0">$query</span> <span class="re2">=</span> <span class="st0">&quot;SELECT `id`,`name`,`email`
            FROM `users`
           WHERE `birth_year`=1955&quot;</span>;
<span class="re0">$result</span> <span class="re2">=</span> <a href="http://www.php.net/mysql_query"><span class="kw3">mysql_query</span></a><span class="br0">&#40;</span><span class="re0">$query</span><span class="br0">&#41;</span> <span class="kw1">or</span> <a href="http://www.php.net/die"><span class="kw3">die</span></a><span class="br0">&#40;</span> <a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#41;</span>;
<span class="re0">$users</span>  <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
<span class="re0">$user</span>   <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
<span class="kw1">while</span> <span class="br0">&#40;</span> <span class="re0">$user</span> <span class="re2">=</span> <a href="http://www.php.net/mysql_fetch_array"><span class="kw3">mysql_fetch_array</span></a><span class="br0">&#40;</span><span class="re0">$result</span>,MYSQL_ASSOC<span class="br0">&#41;</span> <span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$users</span><span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="re2">=</span> <span class="re0">$user</span>;
<span class="br0">&#125;</span></pre>
</div></p>

<p>Your job is to write a function <code>select_rows($table,$cols,$conds,$op)</code> that
takes four parameters</p>

<ol>
<li><code>$table</code>, which table to select the data from,</li>
<li><code>$cols</code>, an array of the columns to select from the table,</li>
<li><code>$conds</code>, an associative array of titles that must match in in 
in the selected rows.  The keys correspond to the column names
while the values correspond to &#8220;what we&#8217;re looking for,&#8221; and</li>
<li><code>$op</code> is either <code>"and"</code> or <code>"or"</code> and indicates whether we want
all of the columns to be matched or <em>one or more</em> of the columns
to be matched, respectively.</li>
</ol>

<p>Your function should return <em>an array of associative arrays</em> corresponding to
the rows that matched the given conditions.</p>

<p>(The last two parameters correspond to the parameters in the previous
<code>where_statement</code> problem.)</p>

<p>So if you have a database table <code>users</code> that looks like</p>

<p><div>
<pre>+---+----------------+-----------------+-----------+
|id |name            |email            |birth_year |
+---+----------------+-----------------+-----------+
|0  |Peter Griffin   |peter@gmail.com  |1955       |
|1  |Louis Griffin   |louis@gmail.com  |1955       |
|3  |Stewie Griffin  |stewie@gmail.com |2005       |
+---+----------------+-----------------+-----------+</pre>
</div></p>

<p>you could run</p>

<p><div>
<pre class="php"><span class="re0">$users</span> <span class="re2">=</span> select_rows<span class="br0">&#40;</span><span class="st0">'users'</span>,
               <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'name'</span>,<span class="st0">'email'</span><span class="br0">&#41;</span>,
               <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'birth_year'</span> <span class="re2">=&gt;</span> <span class="nu0">1955</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>and then have that</p>

<p><div>
<pre class="php"><span class="re0">$users</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>  
            <span class="st0">'name'</span>  <span class="re2">=&gt;</span> <span class="st0">'Peter Griffin'</span>,
            <span class="st0">'email'</span> <span class="re2">=&gt;</span> <span class="st0">'peter@gmail.com'</span>
    <span class="br0">&#41;</span>,<a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
            <span class="st0">'name'</span>  <span class="re2">=&gt;</span> <span class="st0">'Louis Griffin'</span>,
            <span class="st0">'email'</span> <span class="re2">=&gt;</span> <span class="st0">'louis@gmail.com'</span>
    <span class="br0">&#41;</span><span class="br0">&#41;</span>;</pre>
</div></p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">select_rows</span><span class="br0">&#40;</span><span class="re0">$table</span>,<span class="re0">$cols</span>,<span class="re0">$conds</span>,<span class="re0">$op</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <a href="http://www.php.net/global"><span class="kw3">global</span></a> <span class="re0">$link</span>;
    <span class="re0">$cols</span>   <span class="re2">=</span> quote_columns<span class="br0">&#40;</span><span class="re0">$cols</span><span class="br0">&#41;</span>;
    <span class="re0">$where</span>  <span class="re2">=</span> where_statement<span class="br0">&#40;</span><span class="re0">$conds</span>,<span class="re0">$op</span><span class="br0">&#41;</span>;
    <span class="re0">$query</span>  <span class="re2">=</span> <span class="st0">&quot;SELECT $cols FROM `$table` WHERE $where&quot;</span>;
    <span class="re0">$result</span> <span class="re2">=</span> <a href="http://www.php.net/mysql_query"><span class="kw3">mysql_query</span></a><span class="br0">&#40;</span><span class="re0">$query</span>,<span class="re0">$link</span><span class="br0">&#41;</span> <span class="kw1">or</span> <a href="http://www.php.net/die"><span class="kw3">die</span></a><span class="br0">&#40;</span><a href="http://www.php.net/mysql_error"><span class="kw3">mysql_error</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
    <span class="re0">$many</span>   <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="re0">$one</span>    <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="kw1">while</span> <span class="br0">&#40;</span> <span class="re0">$one</span> <span class="re2">=</span> <a href="http://www.php.net/mysql_fetch_array"><span class="kw3">mysql_fetch_array</span></a><span class="br0">&#40;</span><span class="re0">$result</span>,MYSQL_ASSOC<span class="br0">&#41;</span> <span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="re0">$many</span><span class="br0">&#91;</span><span class="br0">&#93;</span> <span class="re2">=</span> <span class="re0">$one</span>;
    <span class="br0">&#125;</span>
    <span class="kw1">return</span> <span class="re0">$many</span>;
<span class="br0">&#125;</span></pre>
</div></p>

</div>

<h2>&#8220;The&#8221; Sorting  &#x2605;&#x2605;&#x2605;&#x2605;</h2>

<p>This one is not easy: it combines what is probably several new concepts into
one slightly-more-than-trivially useful functionality. I&#8217;d say come back to
this one after you&#8217;ve mastered the concepts needed for the other problems
first.</p>

<p>PHP has a built-in function called <code>usort(&amp;$array, $callback)</code> that allows you
to sort an array by calling a user-defined sorting function <code>$callback</code>. You
can also use one of the many built-in comparison functions like
<code>strcmp($a,$b)</code> that compares two strings alphabetically.</p>

<p>The ampersand (<code>&amp;</code>) before <code>$array</code> means that <code>$array</code> will be modified
in-place.  So rather than saying something like</p>

<p><div>
<pre class="php"><span class="re0">$a</span> <span class="re2">=</span> <a href="http://www.php.net/usort"><span class="kw3">usort</span></a><span class="br0">&#40;</span><span class="re0">$a</span>,<span class="st0">'strcmp'</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>you simply say</p>

<p><div>
<pre class="php"><a href="http://www.php.net/usort"><span class="kw3">usort</span></a><span class="br0">&#40;</span><span class="re0">$a</span>,<span class="st0">'strcmp'</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>to sort your <code>$a</code> array alphabetically.</p>

<p>From <a href="http://us3.php.net/usort">the <code>usort</code> documentation</a>,</p>

<blockquote>
  <p>The comparison function must return an integer less than, equal to, or
  greater than zero if the first argument is considered to be respectively
  less than, equal to, or greater than the second.</p>
</blockquote>

<p>So if we wanted to simply sort the array in regular, increasing order, we
might define</p>

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">cmp</span><span class="br0">&#40;</span><span class="re0">$a</span>, <span class="re0">$b</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$a</span> <span class="re2">==</span> <span class="re0">$b</span><span class="br0">&#41;</span>
        <span class="kw1">return</span> <span class="nu0">0</span>;
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="re0">$a</span> <span class="re2">&lt;</span> <span class="re0">$b</span><span class="br0">&#41;</span>
        <span class="kw1">return</span> <span class="nu0">-1</span>;
    <span class="kw1">return</span> <span class="nu0">1</span>;
<span class="br0">&#125;</span></pre>
</div></p>

<p>which we could then call to sort an array a la:</p>

<p><div>
<pre class="php"><span class="re0">$myvals</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="nu0">1</span>,<span class="nu0">3</span>,<span class="nu0">5</span>,<span class="nu0">2</span>,<span class="nu0">4</span>,<span class="nu0">6</span><span class="br0">&#41;</span>;
<a href="http://www.php.net/usort"><span class="kw3">usort</span></a><span class="br0">&#40;</span><span class="re0">$myvals</span>,<span class="st0">'cmp'</span><span class="br0">&#41;</span>;
<span class="co1">// now $myvals = array(1,2,3,4,5,6)</span></pre>
</div></p>

<p>Your assignment is to create a function <code>sort_the($a,$b)</code> that returns <strong>-1</strong>
if <code>$a</code> is alphabetically <strong>before</strong> <code>$b</code>, returns <strong>1</strong> if <code>$a</code> is
alphabetically <strong>after</strong> <code>$a</code> and <strong>0</strong> if <code>$a</code> and <code>$b</code> are alphabetically
the same.</p>

<p>The kicker is that we&#8217;re not going to care about the presence of the words
<em>the</em>, <em>The</em>, <em>a</em>, <em>A</em>, <em>an</em>, or <em>an</em>, if they&#8217;re the first word in a title.</p>

<p>Once you&#8217;ve completed this function, you can do things like</p>

<p><div>
<pre class="php"><span class="re0">$bands</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st0">'Beck'</span>,
    <span class="st0">'Blue October'</span>,
    <span class="st0">'The All American Rejects'</span>,
    <span class="st0">'The Starting Line'</span>
<span class="br0">&#41;</span>;
<a href="http://www.php.net/usort"><span class="kw3">usort</span></a><span class="br0">&#40;</span><span class="re0">$bands</span>,<span class="st0">'sort_the'</span><span class="br0">&#41;</span>;</pre>
</div></p>

<p>which yields the array as</p>

<p><div>
<pre class="php"><span class="re0">$bands</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st0">'The All American Rejects'</span>,
    <span class="st0">'Beck'</span>,
    <span class="st0">'Blue October'</span>,
    <span class="st0">'The Starting Line'</span>
<span class="br0">&#41;</span>;</pre>
</div></p>

<h3>Hint</h3>

<p>Here is the pseudo-code (almost-english description) of what to do as
well as a simple example pair of arguments.</p>

<p><div>
<pre>A := The Rolling Stones
B := A Rage Against the Machine
split the arguments into words to obtain
    A = [The, Rolling, Stones]
    B = [A, Rage, Against, the, Machine]
if the first word is in the list of ignored words then remove it to obtain
    A = [Rolling, Stones]
    B = [Rage, Against, the, Machine]
join the lists back into words to obtain
    A = Rolling Stones
    B = Rage Against the Machine
and use the built-in `strcmp` function to compare the resulting strings</pre>
</div></p>

<div class="showhide" title="">

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">sort_the</span><span class="br0">&#40;</span><span class="re0">$a</span>,<span class="re0">$b</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$ignored_words</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'a'</span>,<span class="st0">'A'</span>,<span class="st0">'the'</span>,<span class="st0">'The'</span><span class="br0">&#41;</span>;
    <span class="re0">$a</span> <span class="re2">=</span> <a href="http://www.php.net/explode"><span class="kw3">explode</span></a><span class="br0">&#40;</span><span class="st0">' '</span>,<span class="re0">$a</span><span class="br0">&#41;</span>;
    <span class="re0">$b</span> <span class="re2">=</span> <a href="http://www.php.net/explode"><span class="kw3">explode</span></a><span class="br0">&#40;</span><span class="st0">' '</span>,<span class="re0">$b</span><span class="br0">&#41;</span>;
    <span class="kw1">if</span> <span class="br0">&#40;</span> <a href="http://www.php.net/count"><span class="kw3">count</span></a><span class="br0">&#40;</span><span class="re0">$a</span><span class="br0">&#41;</span> <span class="re2">&gt;</span> <span class="nu0">0</span> &amp;&amp; <a href="http://www.php.net/in_array"><span class="kw3">in_array</span></a><span class="br0">&#40;</span><span class="re0">$a</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>, <span class="re0">$ignored_words</span><span class="br0">&#41;</span> <span class="br0">&#41;</span>
        <a href="http://www.php.net/array_shift"><span class="kw3">array_shift</span></a><span class="br0">&#40;</span><span class="re0">$a</span><span class="br0">&#41;</span>;
    <span class="kw1">if</span> <span class="br0">&#40;</span> <a href="http://www.php.net/count"><span class="kw3">count</span></a><span class="br0">&#40;</span><span class="re0">$b</span><span class="br0">&#41;</span> <span class="re2">&gt;</span> <span class="nu0">0</span> &amp;&amp; <a href="http://www.php.net/in_array"><span class="kw3">in_array</span></a><span class="br0">&#40;</span><span class="re0">$b</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>, <span class="re0">$ignored_words</span><span class="br0">&#41;</span> <span class="br0">&#41;</span>
        <a href="http://www.php.net/array_shift"><span class="kw3">array_shift</span></a><span class="br0">&#40;</span><span class="re0">$b</span><span class="br0">&#41;</span>;
    <span class="re0">$a</span> <span class="re2">=</span> <a href="http://www.php.net/implode"><span class="kw3">implode</span></a><span class="br0">&#40;</span><span class="st0">' '</span>,<span class="re0">$a</span><span class="br0">&#41;</span>;
    <span class="re0">$b</span> <span class="re2">=</span> <a href="http://www.php.net/implode"><span class="kw3">implode</span></a><span class="br0">&#40;</span><span class="st0">' '</span>,<span class="re0">$b</span><span class="br0">&#41;</span>;
    <span class="kw1">return</span> <a href="http://www.php.net/strcmp"><span class="kw3">strcmp</span></a><span class="br0">&#40;</span><span class="re0">$a</span>,<span class="re0">$b</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

<p>or the more &#8220;refactored&#8221; form:</p>

<p><div>
<pre class="php"><span class="kw4">function</span> <span class="re3">stem_t</span><span class="br0">&#40;</span><span class="re0">$phrase</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="re0">$ignored_words</span> <span class="re2">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st0">'a'</span>,<span class="st0">'A'</span>,<span class="st0">'the'</span>,<span class="st0">'The'</span><span class="br0">&#41;</span>;
    <span class="re0">$phrase</span> <span class="re2">=</span> <a href="http://www.php.net/explode"><span class="kw3">explode</span></a><span class="br0">&#40;</span><span class="st0">' '</span>,<span class="re0">$a</span><span class="br0">&#41;</span>;
    <span class="kw1">if</span> <span class="br0">&#40;</span> <a href="http://www.php.net/count"><span class="kw3">count</span></a><span class="br0">&#40;</span><span class="re0">$phrase</span><span class="br0">&#41;</span> <span class="re2">&gt;</span> <span class="nu0">0</span> &amp;&amp;  <a href="http://www.php.net/in_array"><span class="kw3">in_array</span></a><span class="br0">&#40;</span><span class="re0">$phrase</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span>,<span class="re0">$ignored_words</span><span class="br0">&#41;</span>  <span class="br0">&#41;</span>
        <a href="http://www.php.net/array_shift"><span class="kw3">array_shift</span></a><span class="br0">&#40;</span><span class="re0">$phrase</span><span class="br0">&#41;</span>;
    <span class="kw1">return</span> <a href="http://www.php.net/implode"><span class="kw3">implode</span></a><span class="br0">&#40;</span><span class="st0">' '</span>,<span class="re0">$phrase</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span>
<span class="kw4">function</span> <span class="re3">sort_the</span><span class="br0">&#40;</span><span class="re0">$a</span>,<span class="re0">$b</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    <span class="kw1">return</span> <a href="http://www.php.net/strcmp"><span class="kw3">strcmp</span></a><span class="br0">&#40;</span>stem_t<span class="br0">&#40;</span><span class="re0">$a</span><span class="br0">&#41;</span>,stem_t<span class="br0">&#40;</span><span class="re0">$b</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span></pre>
</div></p>

<p>(Neither of these is particularly efficient, but that&#8217;s not the point.)</p>

</div>


<hr />
<p>
Author:&nbsp;&nbsp;Ryan Timmons<br />
Last Modified:&nbsp;&nbsp;06 August 2008 15:23:13 PDT<br />

URL:&nbsp;&nbsp;<a href="http://uwwebpub.com/" target="_blank">http://uwwebpub.com/</a>
</p>

<p><a href="php_problems.txt">See Original Markdown</a></p>
</body>
</html>